mw.loader.implement("ext.EsoItemLink.scripts",function($,jQuery){window.EsoItemLinkPopup=null;window.EsoItemLinkPopup_LastElement=null;window.EsoItemLinkPopup_Visible=false;window.EsoItemLinkPopup_CacheId="";window.EsoItemLinkPopup_Cache={};window.CreateEsoItemLinkPopup=function(){EsoItemLinkPopup=$('<div />').addClass('eso_item_link_popup').hide();$('body').append(EsoItemLinkPopup);}
window.ShowEsoItemLinkPopup=function(parent,itemId,level,quality,showSummary,intLevel,intType,itemLink,setCount,questId,collectId,enchantId,enchantIntLevel,enchantIntType,enchantFactor,potionData,extraData,version,extraArmor,trait){EsoItemLinkPopup_LastElement=parent;var linkSrc="//esoitem.uesp.net/itemLink.php?&embed";var dataOk=false;if(questId){linkSrc+="&questid="+questId;dataOk=true;}if(collectId){linkSrc+="&collectid="+collectId;dataOk=true;}if(itemId){linkSrc+="&itemid="+itemId;dataOk=true;}if(itemLink){linkSrc+="&link=\'"+encodeURIComponent(itemLink)+"\'";dataOk=true;}if(intLevel)linkSrc+="&intlevel="+intLevel;if(intType)linkSrc+="&inttype="+intType;if(level)linkSrc+="&level="+level;if(quality)linkSrc+="&quality="+quality;if(enchantId)linkSrc+="&enchantid="+enchantId;if(enchantIntLevel)linkSrc+="&enchantintlevel="+enchantIntLevel;if(enchantIntType)linkSrc+="&enchantinttype="+enchantIntType;if(enchantFactor)linkSrc+="&enchantfactor="+enchantFactor;if(potionData)linkSrc+=
"&potiondata="+potionData;if(extraData)linkSrc+="&extradata="+extraData;if(extraArmor)linkSrc+="&extraarmor="+extraArmor;if(version)linkSrc+="&version="+version;if(trait)linkSrc+="&trait="+trait;if(showSummary)linkSrc+="&summary";if(setCount!=null&&setCount>=0)linkSrc+="&setcount="+setCount;if(!dataOk)return false;if(EsoItemLinkPopup==null)CreateEsoItemLinkPopup();var position=$(parent).offset();var width=$(parent).width();EsoItemLinkPopup.css({top:position.top-50,left:position.left+width});EsoItemLinkPopup_Visible=true;var cacheId="";if(itemLink){cacheId=itemLink.toString();}else if(intLevel&&intType){cacheId=itemId.toString()+"_INT_"+intLevel.toString()+"_"+intType.toString();}else if(itemId){cacheId=itemId.toString();}else if(questId){cacheId="Q-"+questId.toString();}else if(collectId){cacheId="C-"+collectId.toString();}if(level)cacheId+="-L"+level.toString();if(quality)cacheId+="-Q"+quality.toString();if(showSummary)cacheId+="-S";if(setCount)cacheId+="-SC"+setCount.toString();if(
enchantFactor)cacheId+="-EF"+enchantFactor.toString();if(potionData)cacheId+="-PD"+potionData.toString();if(extraData)cacheId+="-EX"+extraData.toString();if(extraArmor)cacheId+="-AR"+extraArmor.toString();if(trait)cacheId+="-TR"+trait.toString();if(enchantId){cacheId+="-E"+enchantId.toString()+"-"+enchantIntLevel.toString()+"-"+enchantIntType.toString();}EsoItemLinkPopup_CacheId=cacheId;if(cacheId!=""&&EsoItemLinkPopup_Cache[cacheId]!=null){EsoItemLinkPopup.html(EsoItemLinkPopup_Cache[cacheId]);EsoItemLinkPopup.show();AdjustEsoItemLinkTooltipPosition(EsoItemLinkPopup,$(parent));$(document).trigger("esoTooltipUpdate",[EsoItemLinkPopup,parent]);}else{$.get(linkSrc,function(data){if(EsoItemLinkPopup_LastElement==null)return;if(EsoItemLinkPopup_LastElement!==parent)return;EsoItemLinkPopup.html(data);if(EsoItemLinkPopup_Visible)EsoItemLinkPopup.show();if(cacheId!=""&&cacheId==EsoItemLinkPopup_CacheId)EsoItemLinkPopup_Cache[cacheId]=data;AdjustEsoItemLinkTooltipPosition(EsoItemLinkPopup,$(
parent));$(document).trigger("esoTooltipUpdate",[EsoItemLinkPopup,parent]);});}}
window.AdjustEsoItemLinkTooltipPosition=function(tooltip,parent){var windowWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var toolTipWidth=tooltip.width();var toolTipHeight=tooltip.height();var elementHeight=parent.height();var elementWidth=parent.width();var NARROW_WINDOW_WIDTH=800;var top=parent.offset().top-150;var left=parent.offset().left+parent.outerWidth()+3;if(windowWidth<NARROW_WINDOW_WIDTH){top=parent.offset().top-25-toolTipHeight;left=parent.offset().left-toolTipWidth/2+elementWidth/2;}tooltip.offset({top:top,left:left});var viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.bottom>windowHeight){var deltaHeight=viewportTooltip.bottom-windowHeight+10;top=top-deltaHeight;}else if(viewportTooltip.top<0){var deltaHeight=viewportTooltip.top-10;if(windowWidth<NARROW_WINDOW_WIDTH)deltaHeight=-toolTipHeight-elementHeight-30;top=top-deltaHeight;}if(
viewportTooltip.right>windowWidth){var deltaLeft=-toolTipWidth-parent.width()-28;if(windowWidth<NARROW_WINDOW_WIDTH){deltaLeft=windowWidth-viewportTooltip.right-10;}left=left+deltaLeft;}if(viewportTooltip.left<0){if(windowWidth<NARROW_WINDOW_WIDTH)left=left-viewportTooltip.left+10;else left=left;}tooltip.offset({top:top,left:left});viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.left<0){left=left-viewportTooltip.left+10;tooltip.offset({top:top,left:left});}}
window.HideEsoItemLinkPopup=function(){EsoItemLinkPopup_Visible=false;if(EsoItemLinkPopup==null)return;EsoItemLinkPopup.hide();}
window.OnEsoItemLinkEnter=function(){var $this=$(this);EsoItemLinkPopup_LastElement=$this;ShowEsoItemLinkPopup(EsoItemLinkPopup_LastElement,$this.attr('itemid'),$this.attr('level'),$this.attr('quality'),$this.attr('summary'),$this.attr('intlevel'),$this.attr('inttype'),$this.attr('itemlink'),$this.attr('setcount'),$this.attr('questid'),$this.attr('collectid'),$this.attr('enchantid'),$this.attr('enchantintlevel'),$this.attr('enchantinttype'),$this.attr('enchantfactor'),$this.attr('potiondata'),$this.attr('extradata'),$this.attr('version'),$this.attr('extraarmor'),$this.attr('trait'));}
window.OnEsoItemLinkLeave=function(){EsoItemLinkPopup_LastElement=null;HideEsoItemLinkPopup();}
$(document).ready(function(){$('.eso_item_link').hover(OnEsoItemLinkEnter,OnEsoItemLinkLeave);});},{},{});mw.loader.implement("ext.EsoSkills.scripts",function($,jQuery){(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.
options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e[s]=t.isPlainObject(n)?t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,s){var n=s.
prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'")}):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.
widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:
function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),
this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this.
_toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).
get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},
function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var s=!1;t(document).on(
"mouseup",function(){s=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.
options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}
return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},
_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:
"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.
outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this.
_adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+
"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).
closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+
e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position
(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.
left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.
offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.
containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.
offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element})
;s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(
this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.
placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:
function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(
r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,l,h,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)l=s.snapElements[d].left-s.margins.left,h=l+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,l-g>_||m>h+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(
),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(l-_),r=g>=Math.abs(h-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(l-m),r=g>=Math.abs(h-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[d].snapping
&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:
function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],void 0):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},
_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,o=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&n(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance
,e)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var n=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,l=a+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,d=c+i.proportions().height;switch(s){case"fit":return o>=h&&
u>=r&&a>=c&&d>=l;case"intersect":return o+e.helperProportions.width/2>h&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>l-e.helperProportions.height/2;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,h,i.proportions().width);case"touch":return(a>=c&&d>=a||l>=c&&d>=l||c>a&&l>d)&&(o>=h&&u>=o||r>=h&&u>=r||h>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].
offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,o,a,r=n(e,this,this.options.tolerance,i),l=!r&&this.isover?"isout":r&&!this.isover?"isover":null;l&&(this.options.greedy&&(o=this.options.scope,a=this.element.parents(
":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===o}),a.length&&(s=t(a[0]).droppable("instance"),s.greedyChild="isover"===l)),s&&"isover"===l&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,i),s&&"isout"===l&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass
:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable});!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.
proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);window.g_LastSkillId=0;window.g_LastSkillInputValues={};window.MAX_SKILL_COEF=6;window.g_SkillDisplayType="summary";window.g_EsoSkillSearchText="";window.g_EsoSkillSearchLastIndex=-1;window.g_EsoSkillDragData={};window.g_EsoSkillUpdateEnable=true;window.g_EsoSkillIsMobile=false;ESO_SKILL_TYPES={0:"",1:"Class",2:"Weapon",3:"Armor",4:"World",5:"Guild",6:"Alliance War",7:"Racial",8:"Craft",9:"Champion",};window.RAWDATA_KEYS=["displayId","name","type","skillTypeName","cost","rank","maxRank","learnedLevel","target","duration","minRange","maxRange","radius","castTime","channelTime","angleDistance","isPassive","skillType","isPlayer","numCoefVars","coefDescription","type1","a1","b1","c1","R1","avg1","type2","a2","b2","c2","R2","avg2","type3","a3","b3","c3","R3","avg3","type4","a4",
"b4","c4","R4","avg4","type5","a5","b5","c5","R5","avg5","type6","a6","b6","c6","R6","avg6","description","baseName","effectLines","icon","raceType","classType","skillLine","prevSkill","nextSkill","nextSkill2","skillIndex","isChanneled","mechanic","upgradeLines",];window.RAWDATA_IGNORE_KEYS={"id":true,"texture":true,};window.ROMAN_NUMERALS={1:'I',2:'II',3:'III',4:'IV',5:'V',6:'VI',7:'VII',8:'VIII',9:'IX',10:'X',11:'XI',12:'XII',};window.ESO_FREE_PASSIVES={78219:1,74580:1,45542:1,47276:1,47288:1,46727:1,44590:1,47282:1,46758:1,44625:1,36582:1,36247:1,36588:1,35965:1,36312:1,36063:1,36626:1,33293:1,84680:1,36008:1,43056:1,42358:1,32455:1,103632:1,103793:1,32634:1,};window.EsoConvertDescToHTML=function(desc){return EsoConvertDescToHTMLClass(desc,"esovsWhite");}
window.EsoConvertDescToHTMLClass=function(desc,className){var newDesc=desc.replace(/\|c[a-fA-F0-9]{6}([^|]*)\|r/g,'<div class="'+className+'">$1</div>');newDesc=newDesc.replace(/\n/g,'<br />');return newDesc;}
window.EsoConvertDescToText=function(desc){var newDesc=desc.replace(/\|c[a-fA-F0-9]{6}([^|]*)\|r/g,'$1');return newDesc;}
window.GetRomanNumeral=function(value){if(value<=0)return'';var roman=ROMAN_NUMERALS[value]
if(roman!=null)return roman;return value.tostring();}
window.GetEsoSkillTooltipHtml=function(skillData){if(skillData==null)return"";var output="<div class='esovsSkillTooltip'>\n";var mechanic=skillData['mechanic'];var abilityId=skillData['abilityId'];var safeName=skillData['name'];var rank=skillData['rank'];var maxRank=skillData['maxRank'];var desc=GetEsoSkillDescription(abilityId,null,true);var channelTime=skillData['channelTime']/1000;var castTime=skillData['castTime']/1000;var radius=skillData['radius']/100;var duration=Math.floor(GetEsoSkillDuration(abilityId,null)/100)/10;var target=skillData['target'];var angleDistance=skillData['angleDistance'];var minRange=skillData['minRange'];var maxRange=skillData['maxRange'];var cost=skillData['cost'];var radius=skillData['radius']/100;var castTimeStr=castTime+" seconds";var skillType=skillData['type'];var learnedLevel=skillData['learnedLevel'];var effectLines=skillData['effectLines'];var skillLine=skillData['skillLine'];var area="";var range="";var rankStr="";var realRank=rank;if(skillType!=
'Passive'){if(realRank>4)realRank-=4;if(realRank>4)realRank-=4;}if(maxRank>1&&realRank>0)rankStr=" "+GetRomanNumeral(realRank);if(minRange>0&&maxRange>0)range=(minRange/100)+" - "+(maxRange/100)+" meters"
else if(minRange<=0&&maxRange>0)range=(maxRange/100)+" meters"
else if(minRange>0&&maxRange<=0)range="Under "+(minRange/100)+" meters"
if(angleDistance>0)area=(radius)+" x "+(angleDistance/50)+" meters"
output+="<div class='esovsSkillTooltipTitle'>"+safeName+rankStr+"</div>\n";output+="<img src='//esolog.uesp.net/resources/skill_divider.png' class='esovsSkillTooltipDivider' />";if(skillType!='Passive'){var realCost=ComputeEsoSkillCost(cost,null,null,skillData);var costStr=""+realCost+" ";var costClass="";if(mechanic==0){costStr+="Magicka";costClass="esovsMagicka";}else if(mechanic==6){costStr+="Stamina";costClass="esovsStamina";}else if(mechanic==10){costStr+="Ultimate";costClass="esovsUltimate";}else{costStr=cost;}if(channelTime>0){output+="<div class='esovsSkillTooltipValue'>"+channelTime+" seconds</div>";output+="<div class='esovsSkillTooltipName'>Channel Time</div>";castTimeStr="";}else if(castTime<=0){castTimeStr="Instant";}if(castTimeStr!=''){output+="<div class='esovsSkillTooltipValue'>"+castTimeStr+"</div>";output+="<div class='esovsSkillTooltipName'>Cast Time</div>";}if(target!=''){output+="<div class='esovsSkillTooltipValue'>"+target+"</div>";output+=
"<div class='esovsSkillTooltipName'>Target</div>";}if(area!=''){output+="<div class='esovsSkillTooltipValue'>"+area+"</div>";output+="<div class='esovsSkillTooltipName'>Area</div>";}if(radius>0){output+="<div class='esovsSkillTooltipValue'>"+radius+" meters</div>";output+="<div class='esovsSkillTooltipName'>Radius</div>";}if(range!=""){output+="<div class='esovsSkillTooltipValue'>"+range+"</div>";output+="<div class='esovsSkillTooltipName'>Range</div>";}if(duration>0){output+="<div class='esovsSkillTooltipValue' id='esovsSkillTooltipDuration'>"+duration+" seconds</div>";output+="<div class='esovsSkillTooltipName'>Duration</div>";}if(cost!=''){output+="<div class='esovsSkillTooltipValue "+costClass+"' id='esovsSkillTooltipCost'>"+costStr+"</div>";output+="<div class='esovsSkillTooltipName'>Cost</div>";}output+="<img src='//esolog.uesp.net/resources/skill_divider.png' class='esovsSkillTooltipDivider' />";}output+="<div id='esovsSkillTooltipDesc' class='esovsSkillTooltipDesc'>"+desc+
"</div>\n";if(effectLines!="")output+=" <div class='esovsSkillTooltipEffectLines'><b>NEW EFFECT</b><br/>"+effectLines+"</div>";if(learnedLevel>0){if(skillLine!="")output+="<div class='esovsSkillTooltipLevel'>Unlocked at "+skillLine+" Rank "+learnedLevel+"</div>\n";else output+="<div class='esovsSkillTooltipLevel'>Unlocked at Rank "+learnedLevel+"</div>\n";}output+="</div>";return output;}
window.EsoShowPopupSkillTooltip=function(skillData,parent){var popupElement=$("#esovsPopupSkillTooltip");if(g_EsoSkillDragData.isDragging||$(".ui-draggable-dragging").length>0){popupElement.hide();return;}if(popupElement.length==0){$("body").append('<div id="esovsPopupSkillTooltip"></div>');popupElement=$("#esovsPopupSkillTooltip");}if(skillData==null){popupElement.hide();return;}var output=GetEsoSkillTooltipHtml(skillData);popupElement.html(output);popupElement.show();AdjustEsoSkillPopupTooltipPosition(popupElement,$(parent));}
window.AdjustEsoSkillPopupTooltipPosition=function(tooltip,parent){if(tooltip==null)return;if(tooltip[0]==null)return;if(parent==null)return;var windowWidth=$(window).width();var windowHeight=$(window).height();var toolTipWidth=tooltip.width();var toolTipHeight=tooltip.height();var elementHeight=parent.height();var elementWidth=parent.width();var top=parent.offset().top-toolTipHeight/2+elementHeight/2;var left=parent.offset().left+parent.outerWidth()+3;tooltip.offset({top:top,left:left});var viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.bottom>windowHeight){var deltaHeight=viewportTooltip.bottom-windowHeight+10;top=top-deltaHeight}else if(viewportTooltip.top<0){var deltaHeight=viewportTooltip.top-10;top=top-deltaHeight}if(viewportTooltip.right>windowWidth){left=left-toolTipWidth-parent.width()-28;}tooltip.offset({top:top,left:left});viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.left<0){var el=$('<i/>').css('display','inline').insertBefore
(parent[0]);var realOffset=el.offset();el.remove();left=realOffset.left-toolTipWidth-3;tooltip.offset({top:top,left:left});}}
window.EsoViewSkillShowTooltip=function(skillData){var element=$('#esovsSkillTooltipRoot');if(skillData==null){element.html("<div class='esovsSkillTooltip'>Click on a skill to the right to view tooltip.</div>");g_LastSkillId=-1;return;}g_LastSkillId=skillData.abilityId;element.html(GetEsoSkillTooltipHtml(skillData));}
window.OnEsoSkillBlockClickMobile=function(event){var skillId=$(this).attr('skillid');if(skillId==null||skillId=="")return;var skillData=g_SkillsData[skillId];EsoViewSkillShowTooltip(skillData);EsoShowPopupSkillTooltip(skillData,$(this)[0]);UpdateEsoSkillTooltipDescription();UpdateEsoSkillTooltipCost();UpdateEsoSkillRawData();UpdateEsoSkillCoefData();UpdateSkillLink();}
window.OnEsoSkillBlockClick=function(event){var skillId=$(this).attr('skillid');if(skillId==null||skillId=="")return;EsoViewSkillShowTooltip(g_SkillsData[skillId]);UpdateEsoSkillTooltipDescription();UpdateEsoSkillTooltipCost();UpdateEsoSkillRawData();UpdateEsoSkillCoefData();UpdateSkillLink();}
window.EsoSkillShowSkillLine=function(skillLine){var id=skillLine.replace(/[ '"]/g,'_');$(".esovsSkillContentBlock:visible").hide();$("#"+id).show();}
window.OnEsoSkillTypeTitleClick=function(event,noUpdate){var currentSkillType=$(".esovsSkillTypeTitle.esovsSkillTypeTitleHighlight");var currentSkillLine=$(".esovsSkillLineTitle.esovsSkillLineTitleHighlight");if($(this)[0]==currentSkillType[0])return;$(".esovsSkillType:visible").slideUp();currentSkillType.removeClass("esovsSkillTypeTitleHighlight");currentSkillLine.removeClass("esovsSkillLineTitleHighlight");$(this).next(".esovsSkillType").slideDown();$(this).addClass("esovsSkillTypeTitleHighlight");var firstSkillLine=$(this).next(".esovsSkillType").children(".esovsSkillLineTitle").not(".esovsSkillLineDisabled").first();firstSkillLine.addClass("esovsSkillLineTitleHighlight");var skillType=$(this).text();var skillLine=firstSkillLine.text();if(noUpdate!==false){EsoSkillShowSkillLine(skillLine);UpdateEsoAllSkillDescription();UpdateEsoAllSkillCost();UpdateEsoSkillRawData();UpdateEsoSkillCoefData();UpdateSkillLink();}}
window.OnEsoSkillLineTitleClick=function(event,noUpdate){var currentSkillLine=$(".esovsSkillLineTitle.esovsSkillLineTitleHighlight");if($(this)[0]==currentSkillLine[0])return;currentSkillLine.removeClass("esovsSkillLineTitleHighlight");$(this).addClass("esovsSkillLineTitleHighlight");var skillLine=$(this).text();if(noUpdate!==false){EsoSkillShowSkillLine(skillLine);UpdateEsoAllSkillDescription();UpdateEsoAllSkillCost();UpdateEsoSkillRawData();UpdateEsoSkillCoefData();UpdateSkillLink();}}
window.OnEsoSkillBlockPlusClick=function(event){$(this).parent().next('.esovsAbilityBlockList').slideToggle();}
window.OnEsoSkillBlockPlusSelectClick=function(e){var $openList=$('.esovsAbilityBlockList:visible');var $parent=$(this).parent();var $element=$parent.next('.esovsAbilityBlockList');if($openList[0]==$element[0]){$element.slideUp();return false;}$openList.slideUp();$element.slideToggle();var offsetTop=$element.offset().top;var offsetBottom=offsetTop+$element.height();var scrollTop=$element.parent().scrollTop();var scrollBottom=$element.parent().height();if(offsetTop>scrollBottom){$element.parent().animate({scrollTop:offsetTop,});}e.preventDefault();e.stopPropagation();return false;}
window.OnEsoSkillBlockMinusSelectClick=function(event){$(this).parent().next('.esovsAbilityBlockList').slideToggle();}
window.GetEsoSkillInputValues=function(){var magicka=parseInt($('#esovsInputMagicka').val());var stamina=parseInt($('#esovsInputStamina').val());var health=parseInt($('#esovsInputHealth').val());var spellDamage=parseInt($('#esovsInputSpellDamage').val());var weaponDamage=parseInt($('#esovsInputWeaponDamage').val());var level=ParseEsoLevel($('#esovsInputLevel').val());if(isNaN(health))health=20000;if(isNaN(magicka))magicka=20000;if(isNaN(stamina))stamina=20000;if(isNaN(spellDamage))spellDamage=2000;if(isNaN(weaponDamage))weaponDamage=2000;if(isNaN(level))level=66;g_LastSkillInputValues={Magicka:magicka,Stamina:stamina,Health:health,SpellDamage:spellDamage,WeaponDamage:weaponDamage,MaxStat:Math.max(stamina,magicka),MaxDamage:Math.max(spellDamage,weaponDamage),EffectiveLevel:level,AssassinSkills:0,FightersGuildSkills:0,DraconicPowerSkills:0,ShadowSkills:0,SiphoningSkills:0,SorcererSkills:0,MagesGuildSkills:0,SupportSkills:0,AnimalCompanionSkills:0,GreenBalanceSkills:0,WintersEmbraceSkills
:0,};return g_LastSkillInputValues;}
window.IsEsoSkillParameterDot=function(skillData,valueIndex){if(skillData.baseName=="Drain Essence"&&valueIndex==1)return true;return false;}
window.ComputeEsoSkillValue=function(values,type,a,b,c,coefDesc,valueIndex,skillData){var value=0;var SpellDamage=values.SpellDamage;var WeaponDamage=values.WeaponDamage;var MaxDamage=values.MaxDamage;var matchRegex=new RegExp("\\|c[a-fA-F0-9]{6}\\$"+valueIndex+"\\|r ([A-Za-z]+) Damage( over| each| every| to a target enemy over|)","i");var matchResults=coefDesc.match(matchRegex);var damageType="base";var isDot=false;var skillLine=skillData['skillLine'].toLowerCase();var skillWeaponValues=null;var skillSpellValues=null;var typeWeaponValues=null;var typeSpellValues=null;var SpellDamageType=[];var WeaponDamageType=[];var includeSpellRawOutput=0;var includeWeaponRawOutput=0;if(skillData.rawOutput==null)skillData.rawOutput={};if(matchResults!=null&&matchResults[1]!=null)damageType=matchResults[1].toLowerCase();if(matchResults!=null&&matchResults[2]!=null&&matchResults[2]!="")isDot=true;if(IsEsoSkillParameterDot(skillData,valueIndex))isDot=true;if(values.SkillWeaponDamage==null||values.
SkillSpellDamage==null){}else if(skillData['classType']!=""){skillWeaponValues=values.SkillWeaponDamage['Class'];skillSpellValues=values.SkillSpellDamage['Class'];SpellDamageType.push("Class");WeaponDamageType.push("Class");}else{skillWeaponValues=values.SkillWeaponDamage;skillSpellValues=values.SkillSpellDamage;}if(skillWeaponValues==null||skillSpellValues==null){}else if(skillData['castTime']>0||skillData['channelTime']>0){skillWeaponValues=skillWeaponValues['Channel'];skillSpellValues=skillSpellValues['Channel'];SpellDamageType.push("Channel/Cast Time");WeaponDamageType.push("Channel/Cast Time");}if(values.useMaelstromDamage&&isDot&&skillWeaponValues!=null&&skillSpellValues!=null){skillWeaponValues=skillWeaponValues['Maelstrom'];skillSpellValues=skillSpellValues['Maelstrom'];SpellDamageType.push("Maelstrom");WeaponDamageType.push("Maelstrom");}if(skillWeaponValues!=null){typeWeaponValues=skillWeaponValues['base'];if(skillWeaponValues[skillLine]!=null){typeWeaponValues=
skillWeaponValues[skillLine];WeaponDamageType.push(skillLine);}WeaponDamage=typeWeaponValues['base'];if(typeWeaponValues[damageType]!=null){WeaponDamage=typeWeaponValues[damageType];if(damageType!='base')WeaponDamageType.push(damageType);}if(WeaponDamage==null)WeaponDamage=values.WeaponDamage;}if(skillSpellValues!=null){typeSpellValues=skillSpellValues['base'];if(skillSpellValues[skillLine]!=null){typeSpellValues=skillSpellValues[skillLine];SpellDamageType.push(skillLine);}SpellDamage=typeSpellValues['base'];if(typeSpellValues[damageType]!=null){SpellDamage=typeSpellValues[damageType];if(damageType!='base')SpellDamageType.push(damageType);}if(SpellDamage==null)SpellDamage=values.SpellDamage;}MaxDamage=Math.max(SpellDamage,WeaponDamage);if(SpellDamage!=values.SpellDamage)includeSpellRawOutput=1;if(WeaponDamage!=values.WeaponDamage)includeWeaponRawOutput=1;a=parseFloat(a);b=parseFloat(b);c=parseFloat(c);if(type==-2){value=a*values.Health+c;if(skillData.baseName=="Equilibrium"&&valueIndex
==1&&g_LastSkillInputValues!=null&&g_LastSkillInputValues.SkillLineCost!=null&&g_LastSkillInputValues.SkillLineCost.Mages_Guild_Cost!=0){skillData.rawOutput["$1 Health Cost"]=""+Math.round(value)+" Base + "+(g_LastSkillInputValues.SkillLineCost.Mages_Guild_Cost*100)+"% Mages Guild Cost";value=value*(1+g_LastSkillInputValues.SkillLineCost.Mages_Guild_Cost);}}else if(type==0){value=a*values.Magicka+b*SpellDamage+c;++includeSpellRawOutput;}else if(type==6){value=a*values.Stamina+b*WeaponDamage+c;++includeWeaponRawOutput;}else if(type==10){value=a*values.MaxStat+b*MaxDamage+c;++includeSpellRawOutput;++includeWeaponRawOutput;}else if(type==-50){value=a*values.MaxStat+b*SpellDamage+c;++includeSpellRawOutput;}else if(type==-56){value=a*SpellDamage+b*WeaponDamage+c;++includeSpellRawOutput;++includeWeaponRawOutput;}else if(type==-57){value=a*values.AssassinSkills;}else if(type==-58){value=a*values.FightersGuildSkills;}else if(type==-59){value=a*values.DraconicPowerSkills;}else if(type==-60){
value=a*values.ShadowSkills;}else if(type==-61){value=a*values.SiphoningSkills;}else if(type==-62){value=a*values.SorcererSkills;}else if(type==-63){value=a*values.MagesGuildSkills;}else if(type==-64){value=a*values.SupportSkills;}else if(type==-65){value=a*values.AnimalCompanionSkills;}else if(type==-66){value=a*values.GreenBalanceSkills;}else if(type==-67){value=a*values.WintersEmbraceSkills;}else if(type==-68){value=a*values.Magicka;maxValue=b*values.Health;if(value>maxValue)value=maxValue;}else if(type==-51){if(values.LightArmor==null){if(c==0)return'('+a+' * LIGHTARMOR)';return'('+c+' + '+a+' * LIGHTARMOR)';}value=a*values.LightArmor+c;}else if(type==-52){if(values.MediumArmor==null){if(c==0)return'('+a+' * MEDIUMARMOR)';return'('+c+' + '+a+' * MEDIUMARMOR)';}value=a*values.MediumArmor+c;}else if(type==-53){if(values.HeavyArmor==null){if(c==0)return'('+a+' * HEAVYARMOR)';return'('+c+' + '+a+' * HEAVYARMOR)';}value=a*values.HeavyArmor+c;}else if(type==-54){if(values.DaggerWeapon==
null)return'('+a+' * DAGGER)';value=a*values.DaggerWeapon;}else if(type==-55){if(values.ArmorTypes==null)return'('+a+' * ARMORTYPES)';value=a*values.ArmorTypes;}else{return'?';}if(includeSpellRawOutput>=2)skillData.rawOutput["$"+valueIndex+" Spell Damage Used"]=""+SpellDamage+" "+SpellDamageType.join("+")+"";if(includeWeaponRawOutput>=2)skillData.rawOutput["$"+valueIndex+" Weapon Damage Used"]=""+WeaponDamage+" "+WeaponDamageType.join("+")+"";value=Math.round(value);if(value<0)return 0;return value;}
window.IsEsoSkillValidForMaelstromDWEnchant=function(skillData){if(skillData.baseName=="Soul Strike")return true;if(skillData.baseName=="Rapid Fire")return true;if(skillData.baseName=="Twin Slashes")return true;if(skillData.baseName=="Poison Arrow")return true;if(skillData.baseName=="Searing Strike")return true;if(skillData.name=="Agony")return true;if(skillData.name=="Prolonged Suffering")return true;if(skillData.baseName=="Cripple")return true;if(skillData.baseName=="Trap Beast")return true;if(skillData.baseName=="Sun Fire")return true;if(skillData.baseName=="Soul Trap")return true;if(skillData.baseName=="Radiant Destruction")return true;if(skillData.baseName=="Destructive Touch")return true;if(skillData.baseName=="Entropy")return true;if(skillData.name=="Scalding Rune")return true;if(skillData.baseName=="Inner Fire")return true;if(skillData.baseName=="Drain Essence")return true;return false;}
ESO_SKILL_DURATION_MATCHINDEXES={"Veiled Strike":[0],"Surprise Attack":[0,1],"Concealed Weapon":[0],"Shadow Cloak":[0],"Shadowy Disguise":[0],"Dark Cloak":[0],"Aspect of Terror":[0],"Mass Hysteria":[0],"Manifestation of Terror":[0],"Summon Shade":[0],"Dark Shade":[0],"Shadow Image":[0],};window.UpdateEsoSkillDurationDescription=function(skillData,coefDesc,inputValues){var modDuration=0;var newDesc=coefDesc;if(inputValues==null)inputValues=g_LastSkillInputValues;if(inputValues.SkillDuration!=null&&inputValues.SkillDuration[skillData.baseName]!=null){modDuration=+inputValues.SkillDuration[skillData.baseName];}if(modDuration==0)return newDesc;var durationData=ESO_SKILL_DURATION_MATCHINDEXES[skillData.name]
if(durationData==null)return newDesc;for(var i=0;i<durationData.length;i++){var durationIndex=durationData[i]+1;var matchIndex=0;newDesc=newDesc.replace(/(\|c[a-fA-F0-9]{6})([0-9\.]+)(\|r)( seconds| minutes| minute)/gi,function(match,p1,p2,p3,p4,offset,string){++matchIndex;if(durationIndex!=matchIndex)return p1+p2+p3+p4;var newDuration=Math.floor(parseFloat(p2)*(1+modDuration)*10)/10;skillData.rawOutput["Tooltip Duration #"+matchIndex]=""+p2+" Base x "+Math.floor(modDuration*100)+"% = "+newDuration+p4;return p1+newDuration+p3+p4;});}return newDesc;}
window.GetEsoSkillDescription=function(skillId,inputValues,useHtml,noEffectLines,outputRaw){var output="";var skillData=g_SkillsData[skillId];if(skillData==null)return"";var coefDesc=skillData['coefDescription'];if(inputValues==null)inputValues=GetEsoSkillInputValues()
inputValues.useMaelstromDamage=false;if(IsEsoSkillValidForMaelstromDWEnchant(skillData)){inputValues.useMaelstromDamage=true;}if(coefDesc==null||coefDesc==""){coefDesc=skillData.description;}else{for(var i=1;i<=MAX_SKILL_COEF;++i){var type=skillData['type'+i];if(type==-1)continue;var a=skillData['a'+i];var b=skillData['b'+i];var c=skillData['c'+i];var srcString="$"+i;var value=ComputeEsoSkillValue(inputValues,type,a,b,c,coefDesc,i,skillData);coefDesc=coefDesc.replace(srcString,value);}}coefDesc=UpdateEsoSkillDamageDescription(skillData,coefDesc,inputValues);coefDesc=UpdateEsoSkillHealingDescription(skillData,coefDesc,inputValues);coefDesc=UpdateEsoSkillDamageShieldDescription(skillData,coefDesc,inputValues);coefDesc=UpdateEsoSkillDurationDescription(skillData,coefDesc,inputValues);coefDesc=UpdateEsoSkillElfBaneDurationDescription(skillData,coefDesc,inputValues);if(useHtml){output=EsoConvertDescToHTML(coefDesc);}else{var effectLines=skillData['effectLines'];if(effectLines!=""&&
noEffectLines!==true)coefDesc+=" <div class='esovsAbilityBlockEffectLines'>"+effectLines+"</div>";if(outputRaw!==true)output=EsoConvertDescToText(coefDesc);else output=coefDesc;}skillData.lastDesc=output;return output;}
ESO_SKILL_DAMAGESHIELDMATCHES=[{type:"flat",match:/( a damage shield for you and nearby allies that absorbs \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/( a damage shield for you and your pets that absorbs \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/(You also gain a damage shield that absorbs \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/(You gain a damage shield after the attack, absorbing \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/(Fully charged heavy frost attacks grant a damage shield that absorbs \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/(Surround yourself with a net of magic negation to absorb up to \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/(gaining a damage shield that absorbs \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:
/(Invoke defensive tactics to protect yourself and nearby allies with wards that each absorb up to \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"flat",match:/(absorbing up to \|c[a-fA-F0-9]{6})([0-9]+)(\|r Damage from the next spell projectile cast at you)/gi,},{type:"flat",match:/(with a ward to absorb \|c[a-fA-F0-9]{6})([0-9]+)(\|r damage)/gi,},{type:"%",match:/(Surround yourself with a whirlwind of bones, absorbing damage equivalent to \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of your Max Health)/gi,},{type:"%",match:/(absorbing damage to allies equal to \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of their Max Health)/gi,},{type:"%",match:/(Also absorbs \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of your Max Health)/gi,},{type:"%",match:/(granting a damage shield equal to \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of your Max Health)/gi,},{type:"%",match:/(You also gain a damage shield equal to \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of your Max Health)/gi,},{type:"%",match:
/(nearby allies gain a damage shield for \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of their Max Health)/gi,},];window.UpdateEsoSkillDamageShieldDescription=function(skillData,skillDesc,inputValues){var newDesc=skillDesc;if(inputValues==null)return newDesc;if(inputValues.DamageShield==null||inputValues.DamageShield==0)return newDesc;var rawOutput=[];var newRawOutput={};for(var i=0;i<ESO_SKILL_DAMAGESHIELDMATCHES.length;++i){var matchData=ESO_SKILL_DAMAGESHIELDMATCHES[i];var matchIndex=0;newDesc=newDesc.replace(matchData.match,function(match,p1,p2,p3,offset,string){var modDamageShield=parseFloat(p2);matchIndex=matchIndex+1;newRawOutput={};newRawOutput.baseShield=p2;newRawOutput.shieldBonus=inputValues.DamageShield;modDamageShield*=1+newRawOutput.shieldBonus;modDamageShield=Math.floor(modDamageShield);if(inputValues.Health&&skillData["b"+matchIndex]){var maxShield=Math.floor(skillData["b"+matchIndex]*inputValues.Health);if(modDamageShield>maxShield)modDamageShield=maxShield;}newRawOutput.
finalShield=modDamageShield;rawOutput.push(newRawOutput);return p1+modDamageShield+p3;});}for(var i=0;i<rawOutput.length;++i){var rawData=rawOutput[i];var output="";if(rawData.shieldBonus!=null&&rawData.shieldBonus!=0)output+=" + "+RoundEsoSkillPercent(rawData.shieldBonus*100)+"% ";if(output=="")output=""+rawData.baseShield+" (unmodified)";else output=""+rawData.baseShield+" "+output+" = "+rawData.finalShield+" final";skillData.rawOutput["Tooltip Damage Shield "+(i+1)]=output;}return newDesc;}
ESO_SKILL_HEALINGMATCHES=[{healId:"Done",match:/(healing yourself or a wounded ally for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(heals one other injured target for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you and nearby allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you or up to 2 nearby allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r over)/gi,},{healId:"Done",match:/(healing nearby allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(additional \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(restoring \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(restoring \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of your missing Health)/gi,},{healId:"Done",match:/(healing you and nearby allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r every)/gi,},{healId:"Done",match:/(healing them for an additional \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",healId2:
"Received",match:/(Each reflected spell heals you for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",healId2:"Received",match:/(heal yourself for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",healId2:"Received",match:/(You also heal for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you and your allies in the target area for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you and allies in the area for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",match:/(healing you or up to .*? nearby allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",match:/(instantly healing the most injured friendly target for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(The forest continues to heal you and your allies in the area for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",match:/(and your fully charged Heavy Attacks to restore \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",
match:/(healing for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(heals for an immediate \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you and your allies in front of you for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(Each attack against the enemy restores \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",healId2:"Taken",match:/(healing you and your allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",match:/(healing them for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing themselves for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing yourself and nearby allies for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(that heals you and all allies in your frontal cone for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you and alllies in the area for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",
match:/(Allies may activate the Healing Seed synergy to heal for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",match:/(heal the target for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(causing Light Attacks to restore \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(and your Heavy Attacks to restore \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(continue to receive \|c[a-fA-F0-9]{6})([0-9]+)(\|r healing)/gi,},{healId:"Done",match:/(to heal you and all allies in the area for \|c[a-fA-F0-9]{6})([0-9]+)(\|r)/gi,},{healId:"Done",match:/(healing you and them for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(healing you for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(Also heals you for \|c[a-fA-F0-9]{6})([0-9]+)(\|r% of the damage done)/gi,},{healId:"Done",match:/(heals for \|c[a-fA-F0-9]{6})([0-9]+)(\|r health)/gi,},{healId:"Done",match:
/(causing it to heal the matriarch and up to \|c[a-fA-F0-9]{6}[0-9]+\|r other friendly targets for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},{healId:"Done",match:/(causing it to heal the winged twilight and \|c[a-fA-F0-9]{6}[0-9]+\|r other friendly target for \|c[a-fA-F0-9]{6})([0-9]+)(\|r Health)/gi,},];window.UpdateEsoSkillHealingDescription=function(skillData,skillDesc,inputValues){var newDesc=skillDesc;var isAoE=false;if(inputValues==null)return newDesc;if(inputValues.Healing==null)return newDesc;if((skillData.target=="Ground"||skillData.target=="Area")&&skillData.radius>0)isAoE=true;var rawOutput=[];var newRawOutput={};for(var i=0;i<ESO_SKILL_HEALINGMATCHES.length;++i){var matchData=ESO_SKILL_HEALINGMATCHES[i];newDesc=newDesc.replace(matchData.match,function(match,p1,p2,p3,offset,string){if(inputValues.Healing[matchData.healId]==null)return string;var modHealing=parseFloat(p2);newRawOutput={};newRawOutput.healId=matchData.healId;newRawOutput.baseHeal=p2;newRawOutput.healDone=
inputValues.Healing[matchData.healId];modHealing*=1+inputValues.Healing[matchData.healId];modHealing=Math.round(modHealing);if(isAoE&&inputValues.Healing.AOE!=null&&inputValues.Healing.AOE!=0){newRawOutput.aoeHeal=inputValues.Healing.AOE;modHealing*=1+inputValues.Healing.AOE;modHealing=Math.round(modHealing);}var skillHealing=inputValues.SkillHealing[skillData.skillLine];if(skillHealing==null)skillHealing=inputValues.SkillHealing[skillData.skillLine+" Healing"]
if(inputValues.SkillHealing!=null&&skillHealing!=null){modHealing*=1+skillHealing;modHealing=Math.round(modHealing);newRawOutput.skillHealingDone=skillHealing;}newRawOutput.finalHeal=modHealing;rawOutput.push(newRawOutput);return p1+modHealing+p3;});}for(var i=0;i<rawOutput.length;++i){var rawData=rawOutput[i];var output="";if(rawData.healDone!=null&&rawData.healDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.healDone*100)+"% "+rawData.healId;if(rawData.aoeHeal!=null&&rawData.aoeHeal!=0)output+=" + "+RoundEsoSkillPercent(rawData.aoeHeal*100)+"% AOE";if(rawData.skillHealingDone!=null&&rawData.skillHealingDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.skillHealingDone*100)+"% SkillLine";if(output=="")output=""+rawData.baseHeal+" Health (unmodified)";else output=""+rawData.baseHeal+" Health "+output+" = "+rawData.finalHeal+" final";skillData.rawOutput["Tooltip Healing "+(i+1)]=output;}return newDesc;}
ESO_SKILL_DAMAGEMATCHES=[{damageId:"Magic",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Magic Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Magic",match:/(When the shield expires it explodes outward, dealing )(\|c[a-fA-F0-9]{6})([^|]*)(\|r% of the Damage)(X|)(X|)(X|)(X|)/gi,},{damageId:"Physical",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Physical Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Flame",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Flame Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Shock",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Shock Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Frost",match:
/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Cold Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Frost",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Frost Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Poison",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Poison Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},{damageId:"Disease",match:/(additional |)(\|c[a-fA-F0-9]{6})([^|]*)(\|r Disease Damage)( over| each| every| to enemies in the target area every|)( \|c[a-fA-F0-9]{6}|)([^|]*|)(\|r second|)/gi,},];window.UpdateEsoSkillDamageDescription=function(skillData,skillDesc,inputValues){var newDesc=skillDesc;if(inputValues==null)return newDesc;if(inputValues.Damage==null)return newDesc;var rawOutput=[];var newRawOutput={};var target="";var skillLineName=skillData.
skillLine+' Damage';if(skillData.target)target=skillData.target.toLowerCase();var isDot=false;if(skillData.channelTime>0)isDot=true;if(inputValues.Damage.Dot==null||isNaN(inputValues.Damage.Dot))isDot=false;if(skillData.rawOutput==null)skillData.rawOutput={};for(var i=0;i<ESO_SKILL_DAMAGEMATCHES.length;++i){var matchData=ESO_SKILL_DAMAGEMATCHES[i];var thisEffectIsDot=isDot;var matchIndex=0;newDesc=newDesc.replace(matchData.match,function(match,p1,p2,p3,p4,p5,p6,p7,p8,offset,string){matchIndex=matchIndex+1;if(inputValues.Damage[matchData.damageId]==null)return string;var modDamage=parseFloat(p3);var baseFactor=1;newRawOutput={};newRawOutput.damageId=matchData.damageId;newRawOutput.baseDamage=p3;newRawOutput.mainDamageDone=inputValues.Damage[matchData.damageId];if(inputValues.SkillDamage!=null&&inputValues.SkillDamage[skillData.baseName]!=null){baseFactor+=inputValues.SkillDamage[skillData.baseName];newRawOutput.skillDamageDone=inputValues.SkillDamage[skillData.baseName];}if(inputValues.
SkillLineDamage!=null&&inputValues.SkillLineDamage[skillLineName]!=null){baseFactor+=inputValues.SkillLineDamage[skillLineName];newRawOutput.skillLineDamageDone=inputValues.SkillLineDamage[skillLineName];}if(isDot||p5!=""){thisEffectIsDot=true;if(p5==" over"&&p7!=""&&inputValues.SkillDuration!=null&&inputValues.SkillDuration[skillData.baseName]!=null){var modDuration=inputValues.SkillDuration[skillData.baseName];var oldDuration=parseFloat(p7);var newDuration=oldDuration*(1+modDuration);if(modDuration>=1)newDuration=oldDuration+modDuration;var oldTicks=Math.floor(oldDuration/2)+1;var newTicks=Math.floor(newDuration/2)+1;if(oldTicks!=newTicks&&!isNaN(oldTicks)&&!isNaN(newTicks)){modDamage=Math.round(modDamage*newTicks/oldTicks);newRawOutput.modDuration=Math.floor((newDuration-oldDuration)*10)/10;p7=Math.floor(newDuration*10)/10;}else{p7=Math.floor(newDuration*10)/10;}}baseFactor+=+inputValues.Damage.Dot+ +newRawOutput.mainDamageDone;newRawOutput.dotDamageDone=inputValues.Damage.Dot;}else
if(inputValues.Damage.Direct!=null&&inputValues.Damage.Direct!==0){baseFactor+=+inputValues.Damage.Direct+ +newRawOutput.mainDamageDone;newRawOutput.directDamageDone=inputValues.Damage.Direct;}else{baseFactor+=+newRawOutput.mainDamageDone;}var amountAll=0;if(inputValues.Damage.All!=null)amountAll+=Math.round(inputValues.Damage.All*100)/100;if(inputValues.Damage.Empower!=null&&!thisEffectIsDot&&skillData.mechanic!=10)amountAll+=Math.round(inputValues.Damage.Empower*100)/100;if(inputValues.Damage.SingleTarget!=null){if(target=="enemy"){if(skillData.baseAbilityId!=24785){baseFactor+=Math.round(inputValues.Damage.SingleTarget*100)/100;newRawOutput.singleTargetDamageDone=+inputValues.Damage.SingleTarget;}}}if(inputValues.Damage.AOE!=null){if(target=="area"||target=="cone"||target=="self"||target=="ground"){if(skillData.baseAbilityId!=24785){baseFactor+=Math.round(inputValues.Damage.AOE*100)/100;newRawOutput.aoeDamageDone=+inputValues.Damage.AOE;}}}if(g_EsoSkillFlameAOESkills&&inputValues.
FlameAOEDamageDone){var flameData=g_EsoSkillFlameAOESkills[skillData.abilityId];if(flameData==null)flameData=g_EsoSkillFlameAOESkills[skillData.displayId];if(flameData){if(flameData.length===0||flameData[matchIndex]){baseFactor+=Math.round(inputValues.FlameAOEDamageDone*100)/100;if(newRawOutput.aoeDamageDone==null)newRawOutput.aoeDamageDone=0;newRawOutput.aoeDamageDone+=inputValues.FlameAOEDamageDone;}}}modDamage*=baseFactor;if(amountAll!=0)modDamage*=1+amountAll;newRawOutput.damageDone=amountAll;if(skillData.baseAbilityId==28379&&inputValues.TwinSlashBleedDamage>0&&matchIndex==2){modDamage+=inputValues.TwinSlashBleedDamage;newRawOutput.twinSlashBleedDamage=inputValues.TwinSlashBleedDamage;}newRawOutput.finalDamage=Math.round(modDamage);rawOutput.push(newRawOutput);modDamage=Math.round(modDamage);return p1+p2+modDamage+p4+p5+p6+p7+p8;});}for(var i=0;i<rawOutput.length;++i){var rawData=rawOutput[i];var output="";if(rawData.modDuration!=null&&rawData.modDuration!=0)output+=" + "+
RoundEsoSkillPercent(rawData.modDuration)+" sec ";if(rawData.skillLineDamageDone!=null&&rawData.skillLineDamageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.skillLineDamageDone*100)+"% Skill Line ";if(rawData.skillDamageDone!=null&&rawData.skillDamageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.skillDamageDone*100)+"% Skill ";if(rawData.mainDamageDone!=null&&rawData.mainDamageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.mainDamageDone*100)+"% "+rawData.damageId;if(rawData.aoeDamageDone!=null&&rawData.aoeDamageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.aoeDamageDone*100)+"% AoE";if(rawData.singleTargetDamageDone!=null&&rawData.singleTargetDamageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.singleTargetDamageDone*100)+"% Target";if(rawData.directDamageDone!=null&&rawData.directDamageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.directDamageDone*100)+"% Direct";if(rawData.dotDamageDone!=null&&rawData.dotDamageDone!=0)output+=" + "+RoundEsoSkillPercent(
rawData.dotDamageDone*100)+"% DoT";if(rawData.damageDone!=null&&rawData.damageDone!=0)output+=" + "+RoundEsoSkillPercent(rawData.damageDone*100)+"% All";if(rawData.twinSlashBleedDamage!=null&&rawData.twinSlashBleedDamage!=0)output+=" + "+RoundEsoSkillPercent(rawData.twinSlashBleedDamage)+" BleedDmg";if(output=="")output=""+rawData.baseDamage+" "+rawData.damageId+" Damage (unmodified)";else output=""+rawData.baseDamage+" "+rawData.damageId+" Damage "+output+" = "+rawData.finalDamage+" final";skillData.rawOutput["Tooltip Damage "+(i+1)]=output;}return newDesc;}
ESO_SKILL_ELFBANEDURATIONMATCHES=[/( Flame Damage every \|c[a-fA-F0-9]{6}[^|]*\|r second for )(\|c[a-fA-F0-9]{6})([^|]*)(\|r seconds)/gi,/( Flame Damage over )(\|c[a-fA-F0-9]{6})([^|]*)(\|r seconds)/gi,/( Flame Damage to nearby enemies each second for )(\|c[a-fA-F0-9]{6})([^|]*)(\|r seconds)/gi,];window.UpdateEsoSkillElfBaneDurationDescription=function(skillData,skillDesc,inputValues){var newDesc=skillDesc;var displayId=skillData['displayId'];var skillId=skillData['abilityId'];var elfBaneSkill=null;if(inputValues==null)return newDesc;if(inputValues.ElfBaneDuration==null||inputValues.ElfBaneDuration==0)return newDesc;elfBaneSkill=g_EsoSkillElfBaneSkills[skillId];if(elfBaneSkill==null)elfBaneSkill=g_EsoSkillElfBaneSkills[displayId];if(elfBaneSkill==null)return newDesc;if(skillData.rawOutput==null)skillData.rawOutput={};for(var i=0;i<ESO_SKILL_ELFBANEDURATIONMATCHES.length;++i){var match=ESO_SKILL_ELFBANEDURATIONMATCHES[i];newDesc=newDesc.replace(match,function(match,p1,p2,p3,p4,offset,
string){var newDuration=+p3+inputValues.ElfBaneDuration;if(elfBaneSkill==2&&skillData['newDuration']){newDuration=+skillData['newDuration']/1000;newDuration=newDuration.toFixed(1);skillData.rawOutput["Tooltip Flame Damage Duration (Elf Bane)"]="Ability Duration of "+newDuration+" secs";}else{newDuration=newDuration.toFixed(1);skillData.rawOutput["Tooltip Flame Damage Duration (Elf Bane)"]=""+p3+" + "+inputValues.ElfBaneDuration+" = "+newDuration+" secs";}return p1+p2+newDuration+p4;});}return newDesc;}
window.RoundEsoSkillPercent=function(value){return Math.round(value*10)/10;}
window.UpdateEsoSkillDescription=function(skillId,descElement,inputValues,useHtml){var html=GetEsoSkillDescription(skillId,inputValues,useHtml);descElement.html(html);}
window.UpdateEsoSkillTooltipDescription=function(){if(g_LastSkillId<=0)return;UpdateEsoSkillDescription(g_LastSkillId,$("#esovsSkillTooltipDesc"),GetEsoSkillInputValues(),true)}
window.CreateEsoSkillLineId=function(skillLine){if(skillLine==null)return"";return skillLine.replace(/ /g,"_");}
window.ComputeEsoSkillCostExtra=function(cost,level,inputValues,skillData){if(skillData==null)return cost;if(skillData.rawOutput==null)skillData.rawOutput={};var baseCost=cost;var mechanic=skillData.mechanic;var CPFactor=1;var FlatCost=0;var SkillFactor=1;var skillLineId=CreateEsoSkillLineId(skillData.skillLine)+"_Cost";var skillNameId=CreateEsoSkillLineId(skillData.baseName)+"_Cost";if(mechanic==0&&inputValues.MagickaCost!=null){if(inputValues.MagickaCost.CP!=null)CPFactor+=inputValues.MagickaCost.CP;if(inputValues.MagickaCost.Item!=null)FlatCost+=inputValues.MagickaCost.Item;if(inputValues.MagickaCost.Set!=null)SkillFactor+=inputValues.MagickaCost.Set;if(inputValues.MagickaCost.Skill!=null)SkillFactor+=inputValues.MagickaCost.Skill;if(inputValues.MagickaCost.Buff!=null)SkillFactor+=inputValues.MagickaCost.Buff;}else if(mechanic==6&&inputValues.StaminaCost!=null){if(inputValues.StaminaCost.CP!=null)CPFactor+=inputValues.StaminaCost.CP;if(inputValues.StaminaCost.Item!=null)FlatCost+=
inputValues.StaminaCost.Item;if(inputValues.StaminaCost.Set!=null)SkillFactor+=inputValues.StaminaCost.Set;if(inputValues.StaminaCost.Skill!=null)SkillFactor+=inputValues.StaminaCost.Skill;if(inputValues.StaminaCost.Buff!=null)SkillFactor+=inputValues.StaminaCost.Buff;}else if(mechanic==10&&inputValues.UltimateCost!=null){if(inputValues.UltimateCost.CP!=null)CPFactor+=inputValues.UltimateCost.CP;if(inputValues.UltimateCost.Item!=null)FlatCost+=inputValues.UltimateCost.Item;if(inputValues.UltimateCost.Skill!=null)SkillFactor+=inputValues.UltimateCost.Skill;if(inputValues.UltimateCost.Set!=null)SkillFactor+=inputValues.UltimateCost.Set;if(inputValues.UltimateCost.Buff!=null)SkillFactor+=inputValues.UltimateCost.Buff;}if(g_EsoSkillPoisonSkills&&inputValues.PoisonStaminaCost){var poisonData=g_EsoSkillPoisonSkills[skillData.abilityId];if(poisonData==null)poisonData=g_EsoSkillPoisonSkills[skillData.displayId];if(poisonData){SkillFactor+=inputValues.PoisonStaminaCost;}}var output="";if(
CPFactor!=1)output+=" + "+Math.round(CPFactor*1000-1000)/10+"% CP";if(FlatCost!=0)output+=" + "+FlatCost+" Flat";if(SkillFactor!=1)output+=" + "+Math.round(SkillFactor*1000-1000)/10+"% Skill";if(inputValues.SkillLineCost!=null&&inputValues.SkillLineCost[skillLineId]!=null&&skillData.type=="Active"){var SkillLineFactor=parseFloat(inputValues.SkillLineCost[skillLineId]);SkillFactor+=SkillLineFactor;if(SkillLineFactor!=0)output+=" + "+Math.round(SkillLineFactor*1000)/10+"% SkillLine";}else if(inputValues.SkillLineCost!=null&&inputValues.SkillLineCost[skillLineId]!=null&&skillData.type=="Ultimate"){if(skillData.skillLine=="Vampire"){var SkillLineFactor=parseFloat(inputValues.SkillLineCost[skillLineId]);SkillFactor+=SkillLineFactor;if(SkillLineFactor!=0)output+=" + "+Math.round(SkillLineFactor*1000)/10+"% SkillLine";}}if(inputValues.SkillLineCost!=null&&inputValues.SkillLineCost[skillNameId]!=null){var SkillLineFactor=parseFloat(inputValues.SkillLineCost[skillNameId]);SkillFactor+=
SkillLineFactor;if(SkillLineFactor!=0)output+=" + "+Math.round(SkillLineFactor*1000)/10+"% SkillCost";}cost=Math.ceil((cost*CPFactor+FlatCost)*SkillFactor);if(cost<0)cost=0;if(output=="")output=" (unmodified)";else output+=" = "+cost+" Final";skillData.rawOutput["Ability Cost"]=""+baseCost+" Base "+output;skillData.modifiedCost=cost;return cost;}
window.ComputeEsoSkillCost=function(maxCost,level,inputValues,skillData){if(!g_SkillUseUpdate10Cost)return ComputeEsoSkillCostOld(maxCost,level,inputValues,skillData)
if(inputValues==null)inputValues=GetEsoSkillInputValues();var cost=parseInt(maxCost);if(skillData!=null&&(skillData.mechanic==0||skillData.mechanic==6)){if(maxCost==0)return 0;if(level==null)level=inputValues.EffectiveLevel;if(level<1)level=1;if(level>=66)level=66;cost=Math.round(cost*level/72.0+cost/12.0);if(cost<0)cost=0;}return ComputeEsoSkillCostExtra(cost,level,inputValues,skillData);}
window.ComputeEsoSkillCostOld=function(maxCost,level,inputValues,skillData){if(inputValues==null)inputValues=GetEsoSkillInputValues();var cost=parseInt(maxCost);if(skillData!=null&&(skillData.mechanic==0||skillData.mechanic==6)){if(level==null)level=inputValues.EffectiveLevel;if(level<1)level=1;if(level>=66)return cost;if(level>=1&&level<=50)cost=Math.round(cost*level*25.0/1624.0+cost*75.0/812.0);else cost=Math.round(cost*level/116.0+cost/2.32);if(cost<0)return 0;}return ComputeEsoSkillCostExtra(cost,level,inputValues,skillData);}
window.UpdateEsoSkillTooltipCost=function(){if(g_LastSkillId<=0)return;UpdateEsoSkillCost(g_LastSkillId,$("#esovsSkillTooltipCost"),GetEsoSkillInputValues());}
window.GetEsoSkillCost=function(skillId,inputValues){var skillData=g_SkillsData[skillId];if(skillData==null)return"";var mechanic=skillData['mechanic'];if(mechanic!=0&&mechanic!=6&&mechanic!=10)return"";var passive=skillData['isPassive'];if(passive!=0)return"";if(inputValues==null)inputValues=g_LastSkillInputValues;var baseCost=parseInt(skillData['cost']);var cost=ComputeEsoSkillCost(baseCost,inputValues.EffectiveLevel,inputValues,skillData);var costStr=""+cost+" ";if(mechanic==0)costStr+="Magicka";else if(mechanic==6)costStr+="Stamina";else if(mechanic==10)costStr+="Ultimate";skillData.newCost=cost;skillData.newCostText=costStr;return costStr;}
window.UpdateEsoSkillTooltipDuration=function(){if(g_LastSkillId<=0)return;UpdateEsoSkillDuration(g_LastSkillId,$("#esovsSkillTooltipDuration"),GetEsoSkillInputValues());}
window.GetEsoSkillDuration=function(skillId,inputValues){var modDuration=0;var skillData=g_SkillsData[skillId];if(skillData==null)return"";var displayId=skillData['displayId'];var newDuration=+skillData.duration;if(skillData.duration==0)return 0;if(inputValues==null)inputValues=g_LastSkillInputValues;if(inputValues.SkillDuration&&inputValues.SkillDuration[skillData.baseName]!=null){modDuration=+inputValues.SkillDuration[skillData.baseName];newDuration=0;if(modDuration>=1){newDuration=+skillData.duration+modDuration*1000;skillData.rawOutput["Duration"]=""+(Math.floor(skillData.duration/100)/10)+" Base + "+modDuration+" secs = "+(Math.floor(newDuration/100)/10)+" secs";}else{newDuration=Math.floor(+skillData.duration*(1+modDuration));skillData.rawOutput["Duration"]=""+(Math.floor(skillData.duration/100)/10)+" Base x "+Math.floor(modDuration*100)+"% = "+(Math.floor(newDuration/100)/10)+" secs";}}if(inputValues.ElfBaneDuration&&(g_EsoSkillElfBaneSkills[skillId]||g_EsoSkillElfBaneSkills[
displayId])){var origDuration=newDuration;newDuration+=inputValues.ElfBaneDuration*1000;skillData.rawOutput["Elf Bane Duration"]=""+(Math.floor(origDuration/100)/10)+" + "+inputValues.ElfBaneDuration+" secs = "+(Math.floor(newDuration/100)/10)+" secs";}skillData.newDuration=newDuration;return newDuration;}
window.UpdateEsoSkillCost=function(skillId,costElement,inputValues){var costStr=GetEsoSkillCost(skillId,inputValues);costElement.text(costStr);}
window.UpdateEsoSkillDuration=function(skillId,durationElement,inputValues){var duration=GetEsoSkillDuration(skillId,inputValues);var durationStr="";if(duration>0)durationStr=""+Math.round(duration/100)/10+" seconds";durationElement.text(durationStr);}
window.UpdateEsoSkillCost_ForEach=function(index,element){var skillId=$(this).attr('skillid');if(skillId==null||skillId=='')return;UpdateEsoSkillCost(skillId,$(element),g_LastSkillInputValues);}
window.UpdateEsoSkillDescription_ForEach=function(index,element){var skillId=$(this).attr('skillid');if(skillId==null||skillId=='')return;UpdateEsoSkillDescription(skillId,$(element),g_LastSkillInputValues,false);}
window.UpdateEsoAllSkillDescription=function(){var inputValues=GetEsoSkillInputValues();$(".esovsSkillContentBlock:visible .esovsAbilityBlockDesc").each(UpdateEsoSkillDescription_ForEach);}
window.UpdateEsoAllSkillCost=function(onlyVisible){var inputValues=GetEsoSkillInputValues();if(onlyVisible==null)onlyVisible=true;if(onlyVisible)$(".esovsSkillContentBlock:visible .esovsAbilityBlockCost").each(UpdateEsoSkillCost_ForEach);else $(".esovsSkillContentBlock .esovsAbilityBlockCost").each(UpdateEsoSkillCost_ForEach);}
window.UpdateEsoSkillRawData=function(skillId){var rawDataElement=$("#esovsRawDataContent");UpdateEsoSkillRawDataLink();if(skillId==null)skillId=g_LastSkillId;var skillData=g_SkillsData[skillId];if(skillData==null){rawDataElement.html("");return;}var output="";var keysOutput={};for(var i in RAWDATA_KEYS){var key=RAWDATA_KEYS[i];if(RAWDATA_IGNORE_KEYS[key]||keysOutput[key])continue;keysOutput[key]=true;var value=skillData[key];if(key=="displayId")key="abilityId";output+="<div class='esovsRawDataRow'>";output+="<div class='esovsRawDataName'>"+key+"</div> ";output+="<div class='esovsRawDataValue'>"+value+"</div> ";output+="</div>";}var keys=Object.keys(skillData);for(var i in keys){var key=keys[i];if(RAWDATA_IGNORE_KEYS[key]||keysOutput[key])continue;keysOutput[key]=true;var value=skillData[key];if(key=="abilityId")key="interalAbilityId";output+="<div class='esovsRawDataRow'>";output+="<div class='esovsRawDataName'>"+key+"</div> ";output+="<div class='esovsRawDataValue'>"+value+"</div> ";
output+="</div>";}rawDataElement.html(output);}
window.GetEsoSkillCoefDataHtml=function(skillData,i){var type=skillData['type'+i];if(type==-1)return"";var output="<div class='esovsSkillCoefRow'>";var a=parseFloat(skillData['a'+i]).toFixed(5);var b=parseFloat(skillData['b'+i]).toFixed(5);var c=parseFloat(skillData['c'+i]).toFixed(5);var R=parseFloat(skillData['R'+i]).toFixed(5);var bOp='+';var cOp='+';var typeString="";var srcString="<b>$"+i+"</b>";var ratio='';if(b<0){bOp='-';b=-b;}if(c<0){cOp='-';c=-c;}if(type==-2){output+=srcString+" = "+a+" Health "+cOp+" "+c;typeString="Health";}else if(type==0){output+=srcString+" = "+a+" Magicka "+bOp+" "+b+" SpellDamage "+cOp+" "+c;typeString="Magicka";ratio=(b/a).toFixed(2);}else if(type==6){output+=srcString+" = "+a+" Stamina "+bOp+" "+b+" WeaponDamage "+cOp+" "+c;typeString="Stamina";ratio=(b/a).toFixed(2);}else if(type==10){output+=srcString+" = "+a+" MaxStat "+bOp+" "+b+" MaxDamage "+cOp+" "+c;typeString="Ultimate";ratio=(b/a).toFixed(2);}else if(type==-50){output+=srcString+" = "+a+
" MaxStat "+bOp+" "+b+" SpellDamage "+cOp+" "+c;typeString="Ultimate (no weapon damage)";ratio=(b/a).toFixed(2);}else if(type==-51){output+=srcString+" = "+a+" LightArmor "+cOp+" "+c;typeString="Light Armor #";}else if(type==-52){output+=srcString+" = "+a+" MediumArmor "+cOp+" "+c;typeString="Medium Armor #";}else if(type==-53){output+=srcString+" = "+a+" HeavyArmor "+cOp+" "+c;typeString="Heavy Armor #";}else if(type==-54){output+=srcString+" = "+a+" Dagger "+cOp+" "+c;typeString="Dagger #";}else if(type==-55){output+=srcString+" = "+a+" ArmorTypes "+cOp+" "+c;typeString="Armor Type #";}else if(type==-56){output+=srcString+" = "+a+" SpellDamage "+bOp+" "+b+" WeaponDamage "+cOp+" "+c;typeString="Spell + Weapon Damage";}else if(type==-57){a=Math.round(a);output+=srcString+" = "+a+" AssassinSkills";typeString="Assassination Skills Slotted";}else if(type==-58){a=Math.round(a);output+=srcString+" = "+a+" FightersGuildSkills";typeString="Fighters Guild Skills Slotted";}else if(type==-59){a=
Math.round(a);output+=srcString+" = "+a+" DraconicPowerSkills";typeString="Draconic Power Skills Slotted";}else if(type==-60){a=Math.round(a);output+=srcString+" = "+a+" ShadowSkills";typeString="Shadow Skills Slotted";}else if(type==-61){a=Math.round(a);output+=srcString+" = "+a+" SiphoningSkills";typeString="Siphoning Skills Slotted";}else if(type==-62){a=Math.round(a);output+=srcString+" = "+a+" SorcererSkills";typeString="Sorcerer Skills Slotted";}else if(type==-63){a=Math.round(a);output+=srcString+" = "+a+" MagesGuildSkills";typeString="Mages Guild Skills Slotted";}else if(type==-64){a=Math.round(a);output+=srcString+" = "+a+" SupportSkills";typeString="Support Skills Slotted";}else if(type==-65){a=Math.round(a);output+=srcString+" = "+a+" AnimalCompanionSkills";typeString="Animal Companion Skills Slotted";}else if(type==-66){a=Math.round(a);output+=srcString+" = "+a+" GreenBalanceSkills";typeString="Green Balance Skills Slotted";}else if(type==-67){a=Math.round(a);output+=
srcString+" = "+a+" WintersEmbraceSkills";typeString="Winter's Embrace Slotted";}else if(type==-68){b=Math.round(b*100);output+=srcString+" = "+a+" Magicka    (Capped at "+b+"% Health)";typeString="Magicka with Health Cap";}else{output+=srcString+" = ?";typeString="Unknown Type "+type;}output+="</div>";output+="<div class='esovsSkillCoefRowDetail'>"+typeString+", R<sup>2</sup> = "+R;if(ratio!="")output+=", Ratio = "+ratio;output+="</div>";return output;}
window.UpdateEsoSkillCoefData=function(skillId){var skillCoefElement=$("#esovsSkillCoefContent");if(skillId==null)skillId=g_LastSkillId;var skillData=g_SkillsData[skillId];if(skillData==null||skillData['numCoefVars']<=0){skillCoefElement.html("No known skill coefficients.");return;}var output="";var numCoefVars=skillData['numCoefVars'];var skillDesc=EsoConvertDescToHTMLClass(skillData['coefDescription'],'esovsBold');output+="Showing "+numCoefVars+" known skill coefficients:<p />";for(var i=1;i<=MAX_SKILL_COEF;++i){output+=GetEsoSkillCoefDataHtml(skillData,i);}output+="<div class='esovsSkillCoefDesc'>"+skillDesc+"</div>";skillCoefElement.html(output);}
window.UpdateEsoSkillRawDataLink=function(skillId){var linkElement=$("#esovsRawDataSkillLink");if(skillId==null)skillId=g_LastSkillId;if(skillId==null||skillId<=0){linkElement.removeAttr("href");return;}linkElement.attr("href","//esoitem.uesp.net/viewlog.php?action=view&record=minedSkills&id="+skillId);}
window.ParseEsoLevel=function(level){if(level==null)return 66;if($.isNumeric(level)){level=parseInt(level);if(level<1)return 1;if(level>66)return 66;return level;}var vetRank=level.match(/^\s*[v](\d+)/i);if(vetRank!=null){level=parseInt(vetRank[1])+50;if(isNaN(level))return 66;if(level>66)return 66;if(level<1)return 1;return level;}var cpLevel=level.match(/^\s*CP(\d+)/i);if(cpLevel!=null){level=Math.floor(parseInt(cpLevel[1])/10)+50;if(isNaN(level))return 66;if(level>66)return 66;if(level<1)return 1;return level;}level=parseInt(level);if(isNaN(level))return 1;return level;}
window.FormatEsoLevel=function(level){if(level<=0||level>66)return level;if(level<=50)return level;return"CP"+(level-50)*10;}
window.OnChangeEsoSkillData=function(dataName){var rangeControl=$('#esovsControl'+dataName);var inputControl=$('#esovsInput'+dataName);var value=this.value;if(!$(this).is(rangeControl)){if(dataName=="Level")value=ParseEsoLevel(value);rangeControl.val(value);}if(!$(this).is(inputControl)){if(dataName=="Level")value=FormatEsoLevel(value);inputControl.val(value);}UpdateEsoSkillTooltipDuration();UpdateEsoSkillTooltipCost();UpdateEsoSkillTooltipDescription();UpdateEsoAllSkillDescription();UpdateEsoAllSkillCost();UpdateSkillLink();}
window.OnToggleSkillCoef=function(event){var object=$("#esovsSkillCoefContent");var isVisible=object.is(":visible");object.slideToggle();if(isVisible)$(this).text("Show Skill Coefficients");else $(this).text("Hide Skill Coefficients");}
window.OnToggleRawDataCoef=function(event){var object=$("#esovsRawDataContent");var isVisible=object.is(":visible");object.slideToggle();if(isVisible)$(this).text("Show Raw Data");else $(this).text("Hide Raw Data");}
window.FindNextEsoSkillText=function(){var searchText=g_EsoSkillSearchText.toLowerCase();for(var i=g_EsoSkillSearchLastIndex+1;i<g_SkillSearchIds.length;++i){var id=g_SkillSearchIds[i];var skillData=g_SkillsData[id];var index=skillData['name'].toLowerCase().indexOf(searchText);if(index<0)index=skillData['description'].toLowerCase().indexOf(searchText);if(index>=0&&skillData.__isOutput){return{id:id,index:i};}}return null;}
window.SelectEsoSkillLine=function(skillType,skillLine){var currentSkillType=$(".esovsSkillTypeTitle.esovsSkillTypeTitleHighlight");var currentSkillLine=$(".esovsSkillLineTitle.esovsSkillLineTitleHighlight");var forceLineChange=false;skillType=skillType.toUpperCase();if(currentSkillType.text()!=skillType){var newSkillType=$(".esovsSkillTypeTitle:contains('"+skillType+"')");$(".esovsSkillType:visible").slideUp();currentSkillType.removeClass("esovsSkillTypeTitleHighlight");currentSkillLine.removeClass("esovsSkillLineTitleHighlight");newSkillType.next(".esovsSkillType").slideDown();newSkillType.addClass("esovsSkillTypeTitleHighlight");forceLineChange=true;}if(forceLineChange||currentSkillLine.text()!=skillLine){var newSkillLine=$(".esovsSkillLineTitle:contains('"+skillLine+"')");currentSkillLine.removeClass("esovsSkillLineTitleHighlight");newSkillLine.addClass("esovsSkillLineTitleHighlight");EsoSkillShowSkillLine(skillLine);}}
window.DoesEsoSkillBlockExist=function(id){var objects=$(".esovsAbilityBlock[skillid='"+id+"']");return objects.length!=0;}
window.IsScrolledIntoView=function($elem){var $window=$(window);var docViewTop=$window.scrollTop();var docViewBottom=docViewTop+$window.height();var elemTop=$elem.offset().top;var elemBottom=elemTop+$elem.height();return((elemBottom<=docViewBottom)&&(elemTop>=docViewTop));}
window.HighlightEsoSkill=function(id){var skillData=g_SkillsData[id];if(skillData==null)return false;var skillTypeName=skillData['skillTypeName'];var splitName=skillTypeName.split("::");var skillType=splitName[0];var skillLine=splitName[1];if(skillType==null||skillLine==null)return false;SelectEsoSkillLine(skillType,skillLine);EsoViewSkillShowTooltip(skillData);UpdateEsoSkillTooltipDescription();UpdateEsoSkillTooltipCost();UpdateEsoSkillRawData();UpdateEsoSkillCoefData();UpdateEsoAllSkillDescription();UpdateEsoAllSkillCost();UpdateSkillLink();var abilityBlock=$(".esovsAbilityBlock[skillid='"+id+"']");if(!abilityBlock.is(':visible')){abilityBlock.parent(".esovsAbilityBlockList").slideDown();}abilityBlock.addClass("esovsSearchHighlight");if(!IsScrolledIntoView(abilityBlock)){}return true;}
window.UpdateSkillLink=function(){var linkElement=$("#esovsLinkBlock");var inputValues=GetEsoSkillInputValues();var params="";params+="id="+g_LastSkillId;params+="&level="+inputValues.EffectiveLevel;params+="&health="+inputValues.Health;params+="&magicka="+inputValues.Magicka;params+="&stamina="+inputValues.Stamina;params+="&spelldamage="+inputValues.SpellDamage;params+="&weapondamage="+inputValues.WeaponDamage;if(g_SkillShowAll)params+="&showall";linkElement.attr("href","?"+params);}
window.DoEsoSkillSearch=function(text){var newSearch=false;if(text!=g_EsoSkillSearchText){g_EsoSkillSearchText=text;g_EsoSkillSearchLastIndex=-1;newSearch=true;}$(".esovsSearchHighlight").removeClass("esovsSearchHighlight");var result=FindNextEsoSkillText();if(result==null){g_EsoSkillSearchLastIndex=-1;$("#esovsSearchResult").text("No matches found!");return false;}g_EsoSkillSearchLastIndex=result.index;$("#esovsSearchResult").text("Found match! Search again for next match...");HighlightEsoSkill(result.id);return true;}
window.OnSkillSearch=function(event){var text=$("#esovsSearchText").val().trim();DoEsoSkillSearch(text);}
window.OnHoverEsoIcon=function(e){var parentBlock=$(this).parent(".esovsAbilityBlock");var skillid=parentBlock.attr("skillid");if(skillid==null||skillid=="")return;var skillData=g_SkillsData[parseInt(skillid)];EsoShowPopupSkillTooltip(skillData,$(this)[0]);}
window.OnHoverEsoPassiveIcon=function(e){var parentBlock=$(this).parent(".esovsAbilityBlock");var skillid=parentBlock.attr("skillid");if(skillid==null||skillid=="")return;var parentBlockAttr=parentBlock.parents(".esovsSkillContentBlock").attr("id");var raceType="";if(parentBlockAttr)raceType=parentBlockAttr.replace("_Skills","").replace("_"," ");var learnedLevel=$(this).find(".esovsAbilityBlockIconLevel").text();var skillData=g_SkillsData[parseInt(skillid)];if(raceType!=null&&raceType!=""){skillData['raceType']=raceType;skillData['skillLine']=""+raceType+" Skills";}if(learnedLevel>0)skillData['learnedLevel']=learnedLevel;EsoShowPopupSkillTooltip(skillData,$(this)[0]);}
window.OnLeaveEsoIcon=function(e){var popupElement=$("#esovsPopupSkillTooltip");popupElement.hide();}
window.OnHoverEsoSkillBarIcon=function(e){var skillid=$(this).attr("skillid");if(skillid==null||skillid=="")return;var skillData=g_SkillsData[parseInt(skillid)];EsoShowPopupSkillTooltip(skillData,$(this)[0]);}
window.OnLeaveEsoSkillBarIcon=function(e){var popupElement=$("#esovsPopupSkillTooltip");popupElement.hide();}
window.IsEsoSkillFree=function(skillId){return ESO_FREE_PASSIVES[skillId]!=null}
window.UpdateEsoSkillPassiveData=function(origAbilityId,abilityId,rank){rank=parseInt(rank);if(g_EsoSkillPassiveData[origAbilityId]==null){if(rank<=0)return true;g_EsoSkillPassiveData[origAbilityId]={};g_EsoSkillPassiveData[origAbilityId].rank=0;}var origRank=parseInt(g_EsoSkillPassiveData[origAbilityId].rank);if(rank<=0){g_EsoSkillPointsUsed-=origRank;if(origRank>=1&&rank<1&&IsEsoSkillFree(origAbilityId))g_EsoSkillPointsUsed+=1;delete g_EsoSkillPassiveData[origAbilityId];if(g_EsoSkillUpdateEnable)UpdateEsoSkillTotalPoints();return true;}g_EsoSkillPointsUsed+=rank-origRank;if(origRank<1&&rank>=1&&IsEsoSkillFree(origAbilityId))g_EsoSkillPointsUsed-=1;g_EsoSkillPassiveData[origAbilityId].rank=rank;g_EsoSkillPassiveData[origAbilityId].abilityId=abilityId;g_EsoSkillPassiveData[origAbilityId].baseAbilityId=origAbilityId;g_EsoSkillPassiveData[origAbilityId].skillDesc=GetEsoCurrentSkillDescription(abilityId);if(g_EsoSkillUpdateEnable)UpdateEsoSkillTotalPoints();return true;}
window.UpdateEsoSkillActiveData=function(origAbilityId,abilityId,rank,abilityType,morph){var origPoints=0;var newPoints=1;var isFree=IsEsoSkillFree(origAbilityId);if(g_EsoSkillActiveData[origAbilityId]==null){if(rank<=0)return true;g_EsoSkillActiveData[origAbilityId]={};g_EsoSkillActiveData[origAbilityId].rank=0;}else{origPoints=1;if(g_EsoSkillActiveData[origAbilityId].morph>0)++origPoints;if(isFree)origPoints-=1;}if(rank<=0){g_EsoSkillPointsUsed-=origPoints;delete g_EsoSkillActiveData[origAbilityId];if(g_EsoSkillUpdateEnable)UpdateEsoSkillTotalPoints();return true;}if(morph>0)++newPoints;if(isFree)newPoints-=1;g_EsoSkillPointsUsed+=newPoints-origPoints;g_EsoSkillActiveData[origAbilityId].abilityType=abilityType;g_EsoSkillActiveData[origAbilityId].morph=morph;g_EsoSkillActiveData[origAbilityId].rank=rank;g_EsoSkillActiveData[origAbilityId].abilityId=abilityId;g_EsoSkillActiveData[origAbilityId].baseAbilityId=origAbilityId;g_EsoSkillActiveData[origAbilityId].skillDesc=
GetEsoCurrentSkillDescription(abilityId);if(g_EsoSkillUpdateEnable)UpdateEsoSkillTotalPoints();return true;}
window.OnAbilityBlockPurchase=function(e){$("#esovsPopupSkillTooltip").hide();var skillId=$(this).attr("skillid");var parentSkillId=$(this).parent().prev(".esovsAbilityBlock").attr("skillid");if(skillId<=0)ResetEsoPurchasedSkill(parentSkillId);else PurchaseEsoSkill(skillId);$(this).parent().slideUp();}
window.OnEsoSkillIconBlockClickMobile=function(event){$("#esovsPopupSkillTooltip").hide();var $this=$(this).parent();var $parent=$this.parent();var skillId=$this.attr("skillid");var parentSkillId=$parent.prev(".esovsAbilityBlock").attr("skillid");if(skillId<=0)ResetEsoPurchasedSkill(parentSkillId);else PurchaseEsoSkill(skillId);$parent.slideUp();}
window.EnableEsoClassSkills=function(className){className=className.toUpperCase();var classElement=$(".esovsSkillTypeTitle:contains('"+className+"')");RemovePurchasedEsoClassSkills();$(".esovsSkillTypeTitle:contains('DRAGONKNIGHT')").hide();$(".esovsSkillTypeTitle:contains('NIGHTBLADE')").hide();$(".esovsSkillTypeTitle:contains('SORCERER')").hide();$(".esovsSkillTypeTitle:contains('TEMPLAR')").hide();$(".esovsSkillTypeTitle:contains('WARDEN')").hide();$(".esovsSkillContentBlock").hide();$(".esovsSkillType").hide();$(".esovsSkillLineTitleHighlight").removeClass("esovsSkillLineTitleHighlight");$(".esovsSkillTypeTitleHighlight").removeClass("esovsSkillTypeTitleHighlight");var skillTypes=classElement.next(".esovsSkillType");var firstSkillLine=skillTypes.find(".esovsSkillLineTitle").first();var skillLine=firstSkillLine.text();skillLine=skillLine.replace(/ /g,"_");firstSkillLine.addClass("esovsSkillLineTitleHighlight");classElement.show();skillTypes.show();$("#"+skillLine).show();}
window.PurchaseEsoSkill=function(abilityId){var skillElement=$(".esovsAbilityBlockList").children(".esovsAbilityBlock[skillid='"+abilityId+"']");if(skillElement.length==0)return;var displayBlock=skillElement.parent().prev(".esovsAbilityBlock");if(displayBlock.length==0)return;var passiveIconDisplayBlock=displayBlock.children(".esovsAbilityBlockPassiveIcon");var iconDisplayBlock=displayBlock.children(".esovsAbilityBlockIcon");var titleDisplayBlock=displayBlock.children(".esovsAbilityBlockTitle");var rank=skillElement.attr("rank");var morph=skillElement.attr("morph");var origAbilityId=displayBlock.attr("origskillid");var abilityType=skillElement.attr("abilitytype");var origRank=displayBlock.attr("rank");var origSkillId1=displayBlock.attr("skillid");var origSkillId2=displayBlock.attr("origskillid");var origPurchased=!displayBlock.hasClass("esovsAbilityBlockNotPurchase");if(!origPurchased)origRank=0;if(origPurchased&&abilityId!=origSkillId1){RemoveSkillBarAbility(origSkillId1);
RemoveSkillBarAbility(origSkillId2);UpdateEsoSkillBarData();}displayBlock.removeClass('esovsAbilityBlockNotPurchase');iconDisplayBlock.attr("draggable","true");displayBlock.attr("skillid",abilityId);displayBlock.attr("rank",rank);iconDisplayBlock.html(skillElement.children(".esovsAbilityBlockIcon").html());titleDisplayBlock.html(skillElement.children(".esovsAbilityBlockTitle").html());passiveIconDisplayBlock.html(skillElement.children(".esovsAbilityBlockPassiveIcon").html());if(abilityType=="Passive")UpdateEsoSkillPassiveData(origAbilityId,abilityId,rank);else UpdateEsoSkillActiveData(origAbilityId,abilityId,rank,abilityType,morph);}
window.ResetEsoPurchasedSkill=function(abilityId){var skillElement=$(".esovsSkillContentBlock").children(".esovsAbilityBlock[skillid='"+abilityId+"']");if(skillElement.length==0)return;var displayBlock=skillElement;var passiveIconDisplayBlock=displayBlock.children(".esovsAbilityBlockPassiveIcon");var iconDisplayBlock=displayBlock.children(".esovsAbilityBlockIcon");var titleDisplayBlock=displayBlock.children(".esovsAbilityBlockTitle");var selectBlock=displayBlock.next(".esovsAbilityBlockList").children(".esovsAbilityBlock").eq(1);var rank=skillElement.attr("rank");var morph=skillElement.attr("morph");var origAbilityId=selectBlock.attr("origskillid");var abilityType=skillElement.attr("abilitytype");RemoveSkillBarAbility(origAbilityId);RemoveSkillBarAbility(abilityId);UpdateEsoSkillBarData();displayBlock.addClass('esovsAbilityBlockNotPurchase');iconDisplayBlock.attr("draggable","false");displayBlock.attr("skillid",origAbilityId);iconDisplayBlock.html(selectBlock.children(
".esovsAbilityBlockIcon").html());titleDisplayBlock.html(selectBlock.children(".esovsAbilityBlockTitle").html());passiveIconDisplayBlock.html(selectBlock.children(".esovsAbilityBlockPassiveIcon").html());if(abilityType=="Passive")UpdateEsoSkillPassiveData(origAbilityId,origAbilityId,-1);else UpdateEsoSkillActiveData(origAbilityId,origAbilityId,-1,abilityType,morph);}
window.RemovePurchasedEsoClassSkills=function(){var skillElements=$(".esovsSkillContentBlock").children(".esovsAbilityBlock[skilltype='Class']").not(".esovsAbilityBlockNotPurchase");var initialUpdate=g_EsoSkillUpdateEnable;g_EsoSkillUpdateEnable=false;skillElements.each(function(){var skillId=$(this).attr("skillid");ResetEsoPurchasedSkill(skillId);});RemoveEsoClassSkillsFromPassiveData();g_EsoSkillUpdateEnable=initialUpdate;UpdateEsoSkillBarData();UpdateEsoSkillTotalPoints();}
window.RemoveEsoRaceSkillsFromPassiveData=function(){var deleteSkillIds=[];for(var skillId in g_EsoSkillPassiveData){var skill=g_SkillsData[skillId]
var skillId1=g_EsoSkillPassiveData[skillId].abilityId;if(skill==null)continue;if(skill.raceType!=""){deleteSkillIds.push(skillId);if(skillId!=skillId1)deleteSkillIds.push(skillId1);}}for(var index in deleteSkillIds){var skillId=deleteSkillIds[index];delete g_EsoSkillPassiveData[skillId];}}
window.RemoveEsoClassSkillsFromPassiveData=function(){var deletePassiveIds=[];var deleteActiveIds=[];for(var skillId in g_EsoSkillPassiveData){var skill=g_SkillsData[skillId]
if(skill==null)continue;if(skill.classType!="")deletePassiveIds.push(skillId);}for(var skillId in g_EsoSkillActiveData){var skill=g_SkillsData[skillId]
if(skill==null)continue;if(skill.classType!="")deleteActiveIds.push(skillId);}for(var index in deletePassiveIds){var skillId=deleteSkillIds[index];delete g_EsoSkillPassiveData[skillId];}for(var index in deleteActiveIds){var skillId=deleteSkillIds[index];delete g_EsoSkillActiveData[skillId];}}
window.RemovePurchasedEsoRaceSkills=function(){var skillElements=$(".esovsSkillContentBlock").children(".esovsAbilityBlock[skilltype='Racial']").not(".esovsAbilityBlockNotPurchase");var initialUpdate=g_EsoSkillUpdateEnable;g_EsoSkillUpdateEnable=false;skillElements.each(function(){var skillId=$(this).attr("skillid");ResetEsoPurchasedSkill(skillId);});RemoveEsoRaceSkillsFromPassiveData();g_EsoSkillUpdateEnable=initialUpdate;UpdateEsoSkillBarData();UpdateEsoSkillTotalPoints();}
window.EnableEsoRaceSkills=function(raceName){var raceId=raceName+" Skills";var raceElement=$(".esovsSkillLineTitle:contains('"+raceId+"')")
var classElement=$(".esovsSkillTypeTitle:contains('RACIAL')");RemovePurchasedEsoRaceSkills();classElement.next(".esovsSkillType").find(".esovsSkillLineTitle").hide().addClass("esovsSkillLineDisabled");$(".esovsSkillLineTitleHighlight").removeClass("esovsSkillLineTitleHighlight");$(".esovsSkillContentBlock").hide();$(".esovsSkillType").hide();raceElement.addClass("esovsSkillLineTitleHighlight");raceId=raceId.replace(/ /g,"_");var skillElements=$("#"+raceId).children(".esovsAbilityBlock");skillElements.each(function(){var skillId=$(this).attr("skillid");if(ESO_FREE_PASSIVES[skillId])PurchaseEsoSkill(skillId);});classElement.next(".esovsSkillType").show();raceElement.show();raceElement.removeClass("esovsSkillLineDisabled");$("#"+raceId).show();}
window.SetEsoSkillBarSelect=function(skillBarIndex,weaponBarIndex){$(".esovsSkillBar").removeClass("esovsSkillBarHighlight");if(skillBarIndex==1){$(".esovsSkillBar[skillbar='1']").addClass("esovsSkillBarHighlight");}else if(skillBarIndex==2){$(".esovsSkillBar[skillbar='2']").addClass("esovsSkillBarHighlight");}else if(skillBarIndex==3){$(".esovsSkillBar[skillbar='3']").addClass("esovsSkillBarHighlight");}else if(skillBarIndex==4){$(".esovsSkillBar[skillbar='4']").addClass("esovsSkillBarHighlight");}}
window.OnSkillBarSelect=function(e){var skillBar=$(this).attr("skillbar");var weaponBar=$(this).attr("activeweaponbar");SetEsoSkillBarSelect(skillBar,weaponBar);$(document).trigger("EsoSkillBarSwap",[skillBar,weaponBar]);}
window.OnAbilityDragStart=function(e){var $parent=$(this).parent();var abilityId=$parent.attr("skillid");if(abilityId==null||abilityId<=0)return false;g_EsoSkillDragData={};g_EsoSkillDragData.isDragging=true;g_EsoSkillDragData.abilityId=abilityId;g_EsoSkillDragData.skillBar=-1;g_EsoSkillDragData.skillIndex=-1;g_EsoSkillDragData.origElement=null;g_EsoSkillDragData.origAbilityId=$parent.attr("origskillid");;g_EsoSkillDragData.abilityType=$parent.attr("abilitytype");;g_EsoSkillDragData.iconUrl=$(this).children("img").attr("src");g_EsoSkillDragData.fromSkillBar=false;g_EsoSkillDragData.wasDropped=false;e.originalEvent.dataTransfer.setData('text/html',"nothing");e.originalEvent.dataTransfer.effectAllowed="copy";var popupElement=$("#esovsPopupSkillTooltip");popupElement.hide();return true;}
window.OnSkillBarDragStart=function(e){var $this=$(this);var abilityId=$this.attr("skillid");if(abilityId==null||abilityId<=0)return false;g_EsoSkillDragData={};g_EsoSkillDragData.skillBar=$this.attr("skillbar");g_EsoSkillDragData.skillIndex=$this.attr("skillIndex");g_EsoSkillDragData.origElement=$this;g_EsoSkillDragData.isDragging=true;g_EsoSkillDragData.abilityId=abilityId;g_EsoSkillDragData.origAbilityId=$this.attr("origskillid");g_EsoSkillDragData.iconUrl=$(this).attr("src");g_EsoSkillDragData.fromSkillBar=true;g_EsoSkillDragData.wasDropped=false;if(g_EsoSkillDragData.skillIndex<6)g_EsoSkillDragData.abilityType="Active";else g_EsoSkillDragData.abilityType="Ultimate";e.originalEvent.dataTransfer.setData('text/html',"nothing");e.originalEvent.dataTransfer.effectAllowed="copy";var popupElement=$("#esovsPopupSkillTooltip");popupElement.hide();return true;}
window.OnSkillBarDragOver=function(e){var $this=$(this);if(!$this.hasClass("esovsSkillBarIcon")){$this=$(this).find(".esovsSkillBarIcon");if($this.length==0)return true;}var skillBar=$this.attr("skillbar");var skillIndex=$this.attr("skillindex");if(g_EsoSkillDragData.skillBar==skillBar&&g_EsoSkillDragData.skillIndex==skillIndex){return true;}if(skillIndex==6&&g_EsoSkillDragData.abilityType!="Ultimate"){return true;}if(skillIndex<6&&g_EsoSkillDragData.abilityType=="Ultimate"){return true;}e.preventDefault();return false;}
window.OnSkillBarDrop=function(e){var $this=$(this);if(!$this.hasClass("esovsSkillBarIcon")){$this=$(this).find(".esovsSkillBarIcon");if($this.length==0)return false;}var skillBar=$this.attr("skillbar");var skillIndex=$this.attr("skillindex");g_EsoSkillDragData.wasDropped=true;if(g_EsoSkillDragData.origElement!=null){var swapId=$this.attr("skillid");var swapOrigId=$this.attr("origskillid");if(g_EsoSkillDragData.skillBar==skillBar&&g_EsoSkillDragData.skillIndex==skillIndex)return;if(swapId!=g_EsoSkillDragData.abilityId&&swapOrigId!=g_EsoSkillDragData.origAbilityId&&g_EsoSkillDragData.skillBar!=skillBar){RemoveSkillBarAbility(g_EsoSkillDragData.abilityId,skillBar);RemoveSkillBarAbility(g_EsoSkillDragData.origAbilityId,skillBar);RemoveSkillBarAbility(swapId,g_EsoSkillDragData.skillBar);RemoveSkillBarAbility(swapOrigId,g_EsoSkillDragData.skillBar);}g_EsoSkillDragData.origElement.attr("origskillid",swapOrigId);g_EsoSkillDragData.origElement.attr("skillid",swapId);g_EsoSkillDragData.
origElement.attr("src",$this.attr("src"));}else{RemoveSkillBarAbility(g_EsoSkillDragData.abilityId,skillBar);RemoveSkillBarAbility(g_EsoSkillDragData.origAbilityId,skillBar);}$this.attr("origskillid",g_EsoSkillDragData.origAbilityId);$this.attr("skillid",g_EsoSkillDragData.abilityId);$this.attr("src",g_EsoSkillDragData.iconUrl);$this.attr("draggable","true");g_EsoSkillDragData.isDragging=false;UpdateEsoSkillBarData();e.preventDefault();e.stopPropagation();}
window.OnSkillBarRevertDraggable=function(droppableObj){if(droppableObj!==false)return false;var sourceBlockIcon=$(this);if(!sourceBlockIcon.hasClass("esovsSkillBarIcon"))return false;var sourceAbilityId=sourceBlockIcon.attr("skillid");var sourceOrigAbilityId=sourceBlockIcon.attr("origskillid");var sourceIconUrl=sourceBlockIcon.attr("src");var skillBar=sourceBlockIcon.attr("skillBar");if(sourceAbilityId<=0)return false;RemoveSkillBarAbility(sourceAbilityId,skillBar);UpdateEsoSkillBarData();return false;}
window.OnSkillBarDroppableOut=function(event,ui){var $this=$(this);var realDraggable=$(".ui-draggable-dragging");var currentImage=$this.find("img");var oldSrc=currentImage.attr("oldsrc");realDraggable.addClass("esovsSkillDraggableBad");realDraggable.removeClass("esovsSkillDraggableGood");if(oldSrc!=null)currentImage.attr("src",oldSrc);}
window.OnSkillBarDroppableOver=function(event,ui){var $this=$(this);var realDraggable=$(".ui-draggable-dragging");var currentImage=$this.find("img");var src=currentImage.attr("src");var newSrc="";realDraggable.removeClass("esovsSkillDraggableBad");realDraggable.addClass("esovsSkillDraggableGood");if(realDraggable.hasClass("esovsAbilityBlockIcon")){newSrc=realDraggable.find("img").attr("src");}else if(realDraggable.hasClass("esovsSkillBarIcon")){newSrc=realDraggable.attr("src");}if(src==null)src=="";currentImage.attr("oldsrc",src);if(newSrc)currentImage.attr("src",newSrc);}
window.OnSkillBarDraggableStart=function(event,ui){$(".ui-draggable-dragging").addClass('esovsSkillDraggableBad').addClass('esovsSkillDraggable');$("#esovsPopupSkillTooltip").hide();$("#esovsSkillBar").find(".esovsSkillBarIcon").removeAttr("oldsrc");}
window.OnSkillBarDroppableAccept=function(draggable){var $this=$(this);draggable=$(draggable);var sourceAbilityId=-1;var sourceSkillIndex=-1;if(draggable.hasClass("esovsAbilityBlockIcon")){var sourceSkill=draggable.parent(".esovsAbilityBlock");sourceAbilityId=sourceSkill.attr("skillid");}else if(draggable.hasClass("esovsSkillBarIcon")){sourceAbilityId=parseInt(draggable.attr("skillid"));}else{return false;}if($this.hasClass('esovsSkillBarItem')){var barImage=$this.find("img");sourceSkillIndex=barImage.attr("skillindex");}else{return false;}var skillData=g_SkillsData[sourceAbilityId];if(skillData==null)return false;if(skillData.type=="Ultimate"&&sourceSkillIndex!=6)return false;if(skillData.type!="Ultimate"&&sourceSkillIndex==6)return false;return true;}
window.OnSkillBarDroppable=function(event,ui){var $this=$(this);var sourceBlockIcon=$(ui.draggable);var sourceSkill=sourceBlockIcon.parent(".esovsAbilityBlock");var skillBarParent=$this.parent(".esovsSkillBar");var sourceAbilityId=-1;var sourceOrigAbilityId=-1;var sourceIconUrl=-1;var isSkillSwap=false;if(sourceSkill.length>0){sourceAbilityId=sourceSkill.attr("skillid");sourceOrigAbilityId=sourceSkill.attr("origskillid");sourceIconUrl=sourceBlockIcon.find("img").attr("src");}else if(sourceBlockIcon.hasClass("esovsSkillBarIcon")){sourceAbilityId=sourceBlockIcon.attr("skillid");sourceOrigAbilityId=sourceBlockIcon.attr("origskillid");sourceIconUrl=sourceBlockIcon.attr("src");isSkillSwap=true;}if(sourceAbilityId<=0)return false;if(g_EsoSkillDestructionData&&g_EsoSkillDestructionData[sourceAbilityId]!=null){var element=g_EsoSkillDestructionElement;if(!skillBarParent.hasClass("esovsSkillBarHighlight"))element=g_EsoSkillDestructionOffHandElement;if(g_EsoSkillDestructionData[sourceAbilityId][
element]!=null){sourceAbilityId=g_EsoSkillDestructionData[sourceAbilityId][element];if(g_SkillsData[sourceAbilityId]!=null){sourceIconUrl="//esoicons.uesp.net"+g_SkillsData[sourceAbilityId]['icon'];sourceIconUrl.replace("\.dds",".png");}}}if(!$this.hasClass("esovsSkillBarIcon")){$this=$(this).find(".esovsSkillBarIcon");if($this.length==0)return false;}var skillBar=$this.attr("skillbar");var skillIndex=$this.attr("skillindex");if(isSkillSwap){var swapId=$this.attr("skillid");var swapOrigId=$this.attr("origskillid");var sourceSkillBar=sourceBlockIcon.attr("skillbar");;var sourceSkillIndex=sourceBlockIcon.attr("skillindex");if(sourceSkillBar==skillBar&&sourceSkillIndex==skillIndex)return;if(swapId!=sourceAbilityId&&swapOrigId!=sourceOrigAbilityId&&sourceSkillBar!=skillBar){RemoveSkillBarAbility(sourceAbilityId,skillBar);RemoveSkillBarAbility(sourceOrigAbilityId,skillBar);RemoveSkillBarAbility(swapId,sourceSkillBar);RemoveSkillBarAbility(swapOrigId,sourceSkillBar);}sourceBlockIcon.attr(
"origskillid",swapOrigId);sourceBlockIcon.attr("skillid",swapId);sourceBlockIcon.attr("src",$this.attr("oldsrc"));}else{RemoveSkillBarAbility(sourceAbilityId,skillBar);RemoveSkillBarAbility(sourceOrigAbilityId,skillBar);}$this.attr("origskillid",sourceOrigAbilityId);$this.attr("skillid",sourceAbilityId);$this.attr("src",sourceIconUrl);$this.attr("draggable","true");$("#esovsSkillBar").find(".esovsSkillBarIcon").removeAttr("oldsrc");UpdateEsoSkillBarData();event.preventDefault();event.stopPropagation();}
window.RemoveSkillBarAbility=function(abilityId,skillBar){if(skillBar==null){RemoveSkillBarAbility(abilityId,1);RemoveSkillBarAbility(abilityId,2);RemoveSkillBarAbility(abilityId,3);RemoveSkillBarAbility(abilityId,4);return;}var skillBars1=$("#esovsSkillBar .esovsSkillBar[skillbar='"+skillBar+"']").find(".esovsSkillBarIcon[skillid='"+abilityId+"']");var skillBars2=$("#esovsSkillBar .esovsSkillBar[skillbar='"+skillBar+"']").find(".esovsSkillBarIcon[origskillid='"+abilityId+"']");skillBars1.attr("skillid","0");skillBars1.attr("origskillid","0");skillBars1.attr("src","");skillBars1.attr("draggable","true");skillBars2.attr("skillid","0");skillBars2.attr("origskillid","0");skillBars2.attr("src","");skillBars2.attr("draggable","true");}
window.OnSkillBarDragEnd=function(e){g_EsoSkillDragData.isDragging=false;if(g_EsoSkillDragData.fromSkillBar&&!g_EsoSkillDragData.wasDropped){RemoveSkillBarAbility(g_EsoSkillDragData.abilityId,g_EsoSkillDragData.skillBar);UpdateEsoSkillBarData();}}
window.UpdateEsoSkillBarData=function(){g_EsoSkillBarData=[];g_EsoSkillBarData[0]=[];g_EsoSkillBarData[1]=[];g_EsoSkillBarData[2]=[];g_EsoSkillBarData[3]=[];UpdateEsoSkillBarSkill(1,1);UpdateEsoSkillBarSkill(1,2);UpdateEsoSkillBarSkill(1,3);UpdateEsoSkillBarSkill(1,4);UpdateEsoSkillBarSkill(1,5);UpdateEsoSkillBarSkill(1,6);UpdateEsoSkillBarSkill(2,1);UpdateEsoSkillBarSkill(2,2);UpdateEsoSkillBarSkill(2,3);UpdateEsoSkillBarSkill(2,4);UpdateEsoSkillBarSkill(2,5);UpdateEsoSkillBarSkill(2,6);UpdateEsoSkillBarSkill(3,1);UpdateEsoSkillBarSkill(3,2);UpdateEsoSkillBarSkill(3,3);UpdateEsoSkillBarSkill(3,4);UpdateEsoSkillBarSkill(3,5);UpdateEsoSkillBarSkill(3,6);UpdateEsoSkillBarSkill(4,1);UpdateEsoSkillBarSkill(4,2);UpdateEsoSkillBarSkill(4,3);UpdateEsoSkillBarSkill(4,4);UpdateEsoSkillBarSkill(4,5);UpdateEsoSkillBarSkill(4,6);if(g_EsoSkillUpdateEnable)$(document).trigger("EsoSkillBarUpdate");}
window.UpdateEsoSkillBarSkill=function(skillBar,skillIndex){var iconElement=$("#esovsSkillBar .esovsSkillBar[skillbar='"+skillBar+"']").find(".esovsSkillBarIcon[skillindex='"+skillIndex+"']");var skillId=iconElement.attr("skillid");var newData={};if(skillId==0){newData.skillId=skillId;}else{newData.skillId=skillId;newData.origSkillId=iconElement.attr("origskillid");;newData.skillType=skillIndex==6?"Ultimate":"Active";newData.skillDesc=GetEsoCurrentSkillDescription(skillId);}g_EsoSkillBarData[skillBar-1][skillIndex-1]=newData;}
window.GetEsoCurrentSkillDescription=function(abilityId){return $(".esovsAbilityBlockDesc[skillid='"+abilityId+"']").text();}
window.UpdateEsoSkillTotalPoints=function(){var element=$("#esovsSkillPoints");element.text(g_EsoSkillPointsUsed);if(g_EsoSkillUpdateEnable)$(document).trigger("EsoSkillUpdate");}
window.OnEsoSkillReset=function(e){g_EsoSkillPassiveData={};g_EsoSkillActiveData={};g_EsoSkillPointsUsed=0;g_EsoSkillUpdateEnable=false;$("#esovsSkillBar .esovsSkillBarIcon").attr("skillid","0").attr("src","").attr("draggable","false").attr("origskillid","0");$("#esovsSkillContent .esovsSkillContentBlock").children(".esovsAbilityBlock").each(function(i,e){var selectBlock=$(this).next(".esovsAbilityBlockList").children(".esovsAbilityBlock").eq(1);var displayBlock=$(this);var passiveIconDisplayBlock=displayBlock.children(".esovsAbilityBlockPassiveIcon");var iconDisplayBlock=displayBlock.children(".esovsAbilityBlockIcon");var titleDisplayBlock=displayBlock.children(".esovsAbilityBlockTitle");var skillId=selectBlock.attr("skillid");displayBlock.addClass('esovsAbilityBlockNotPurchase');iconDisplayBlock.attr("draggable","false");displayBlock.attr("skillid",skillId);iconDisplayBlock.html(selectBlock.children(".esovsAbilityBlockIcon").html());titleDisplayBlock.html(selectBlock.children(
".esovsAbilityBlockTitle").html());passiveIconDisplayBlock.html(selectBlock.children(".esovsAbilityBlockPassiveIcon").html());});g_EsoSkillUpdateEnable=true;UpdateEsoSkillBarData();UpdateEsoSkillTotalPoints();}
window.OnEsoSkillLinePurchaseAll=function(){var skillElements=$(this).parent().children(".esovsAbilityBlock");g_EsoSkillUpdateEnable=false;skillElements.each(function(){var skillId=$(this).attr("skillid");var lastSkill=$(this).next(".esovsAbilityBlockList").children(".esovsAbilityBlock").last();var lastSkillId=lastSkill.attr("skillid");PurchaseEsoSkill(lastSkillId);});g_EsoSkillUpdateEnable=true;UpdateEsoSkillTotalPoints();}
window.OnEsoSkillLineResetAll=function(){var skillElements=$(this).parent().children(".esovsAbilityBlock").not(".esovsAbilityBlockNotPurchase");var skillType=$(this).parent(".esovsSkillContentBlock").attr("skilltype");g_EsoSkillUpdateEnable=false;skillElements.each(function(){var skillId=$(this).attr("skillid");ResetEsoPurchasedSkill(skillId);});if(skillType=="Racial")RemoveEsoRaceSkillsFromPassiveData();g_EsoSkillUpdateEnable=true;UpdateEsoSkillTotalPoints();}
window.EsoSkillLog=function(){if(console==null)return;if(console.log==null)return;console.log.apply(console,arguments);}
window.esovsOnDocReady=function(){if(window.skin=="minerva")g_EsoSkillIsMobile=true;$('.esovsSkillTypeTitle').click(OnEsoSkillTypeTitleClick);$('.esovsSkillLineTitle').click(OnEsoSkillLineTitleClick);if(g_EsoSkillIsMobile){$('.esovsAbilityBlock').click(OnEsoSkillBlockClickMobile);$('.esovsAbilityBlockPlus').click(OnEsoSkillBlockPlusClick);$('.esovsAbilityBlockPlusSelect').click(OnEsoSkillBlockPlusSelectClick);$('.esovsAbilityBlockMinusSelect').click(OnEsoSkillBlockMinusSelectClick);$('.esovsAbilityBlockList').find('.esovsAbilityBlockIcon').click(OnEsoSkillIconBlockClickMobile);$('.esovsAbilityNone').click(OnAbilityBlockPurchase);}else{$('.esovsAbilityBlock').click(OnEsoSkillBlockClick);$('.esovsAbilityBlockPlusSelect').click(OnEsoSkillBlockPlusSelectClick);$('.esovsAbilityBlockMinusSelect').click(OnEsoSkillBlockMinusSelectClick);$('.esovsAbilityBlockPlus').click(OnEsoSkillBlockPlusClick);$(".esovsAbilityBlockSelect").click(OnAbilityBlockPurchase);}$('#esovsControlLevel').on('input',
function(e){OnChangeEsoSkillData.call(this,'Level');});$('#esovsInputLevel').on('input',function(e){OnChangeEsoSkillData.call(this,'Level');});$('#esovsControlMagicka').on('input',function(e){OnChangeEsoSkillData.call(this,'Magicka');});$('#esovsInputMagicka').on('input',function(e){OnChangeEsoSkillData.call(this,'Magicka');});$('#esovsControlStamina').on('input',function(e){OnChangeEsoSkillData.call(this,'Stamina');});$('#esovsInputStamina').on('input',function(e){OnChangeEsoSkillData.call(this,'Stamina');});$('#esovsControlHealth').on('input',function(e){OnChangeEsoSkillData.call(this,'Health');});$('#esovsInputHealth').on('input',function(e){OnChangeEsoSkillData.call(this,'Health');});$('#esovsControlSpellDamage').on('input',function(e){OnChangeEsoSkillData.call(this,'SpellDamage');});$('#esovsInputSpellDamage').on('input',function(e){OnChangeEsoSkillData.call(this,'SpellDamage');});$('#esovsControlWeaponDamage').on('input',function(e){OnChangeEsoSkillData.call(this,'WeaponDamage');
});$('#esovsInputWeaponDamage').on('input',function(e){OnChangeEsoSkillData.call(this,'WeaponDamage');});$("#esovsSkillCoefButton").click(OnToggleSkillCoef);$("#esovsRawDataButton").click(OnToggleRawDataCoef);$("#esovsSearchText").on("keypress",function(e){if(e.keyCode==13)OnSkillSearch(e);});$("#esovsSearchButton").click(OnSkillSearch);if(g_EsoSkillIsMobile){$(".esovsAbilityBlockIcon").click(function(e){setTimeout(function(){OnHoverEsoIcon.bind(this,e);},250);e.preventDefault();e.stopPropagation();return false;});$(".esovsAbilityBlockPassiveIcon").click(function(e){setTimeout(function(){OnHoverEsoPassiveIcon.bind(this,e);},250);e.preventDefault();e.stopPropagation();return false;});$(".esovsSkillBarItem").click(function(e){setTimeout(function(){OnHoverEsoSkillBarIcon.bind(this,e);},250);e.preventDefault();e.stopPropagation();return false;});}else{$(".esovsAbilityBlockIcon").hover(OnHoverEsoIcon,OnLeaveEsoIcon);$(".esovsAbilityBlockPassiveIcon").hover(OnHoverEsoPassiveIcon,
OnLeaveEsoIcon);$(".esovsSkillBarIcon").hover(OnHoverEsoSkillBarIcon,OnLeaveEsoSkillBarIcon);}$(".esovsSkillBar").click(OnSkillBarSelect)
$(".esovsSkillContentBlock").children(".esovsAbilityBlock").children(".esovsAbilityBlockIcon").draggable({containment:false,appendTo:$('body'),helper:'clone',start:OnSkillBarDraggableStart,classes:{},});$(".esovsSkillBarIcon").draggable({containment:false,appendTo:$('body'),helper:'clone',revert:OnSkillBarRevertDraggable,start:OnSkillBarDraggableStart,classes:{},});$(".esovsSkillBarItem").droppable({drop:OnSkillBarDroppable,accept:OnSkillBarDroppableAccept,out:OnSkillBarDroppableOut,over:function(event,ui){setTimeout(OnSkillBarDroppableOver.bind(this,event,ui),0);},classes:{},});$("#esovsSkillReset").click(OnEsoSkillReset);$(".esovsSkillLinePurchaseAll").click(OnEsoSkillLinePurchaseAll);$(".esovsSkillLineResetAll").click(OnEsoSkillLineResetAll);var highlightSkill=$(".esovsSearchHighlight");if(g_SkillDisplayType=="summary"){if(highlightSkill.length==0)$(".esovsAbilityBlock").first().trigger('click');else highlightSkill.trigger('click');}UpdateEsoAllSkillDescription();
UpdateEsoAllSkillCost();}
$(document).ready(esovsOnDocReady);window.g_EsoCpDisableUpdates=false;window.g_EsoCpData={};window.g_EsoCPSearchText="";window.g_EsoCPSearchLastIndex=-1;window.UpdateEsoCpData=function(){var cpSkills=$(".esovcpSkill");var cpDiscs=$(".esovcpDiscipline");var cpAttributes=$(".esovcpDiscAttrPoints");cpSkills.each(function(){var $this=$(this);var skillId=$this.attr("skillid");if(skillId==null||skillId=="")return;var skillName=$this.find(".esovcpSkillName").text();if(g_EsoCpData[skillId]==null){g_EsoCpData[skillId]={};g_EsoCpData[skillId].type="skill";g_EsoCpData[skillId].id=skillId;g_EsoCpData[skillId].name=skillName;g_EsoCpData[skillId].discipline=$this.parent().attr("disciplineid");g_EsoCpData[skillId].unlockLevel=$this.attr("unlockLevel");g_EsoCpData[skillName]=g_EsoCpData[skillId];}g_EsoCpData[skillId].points=$this.find(".esovcpPointInput").val();g_EsoCpData[skillId].isUnlocked=($this.attr("unlocked")!=0);g_EsoCpData[skillId].description=$this.find(".esovcpSkillDesc").text();});cpDiscs.
each(function(){var $this=$(this);var discId=$this.attr("id");if(discId==null||discId=="")return;if(g_EsoCpData[discId]==null){g_EsoCpData[discId]={};g_EsoCpData[discId].type="discipline";g_EsoCpData[discId].index=$this.attr("disciplineindex");g_EsoCpData[discId].attribute=$this.parent().attr("attributeindex");}g_EsoCpData[discId].points=$this.find(".esovcpDiscPoints").text();});g_EsoCpData["totalPoints"]=0;cpAttributes.each(function(){var $this=$(this);var attributeIndex=$this.attr("attributeindex");if(attributeIndex==null||attributeIndex=="")return;var attributeId="attribute"+attributeIndex;if(g_EsoCpData[attributeId]==null){g_EsoCpData[attributeId]={};g_EsoCpData[attributeId].type="attribute";g_EsoCpData[attributeId].index=attributeIndex;}g_EsoCpData[attributeId].points=parseInt($this.text());g_EsoCpData["totalPoints"]+=g_EsoCpData[attributeId].points;});}
window.OnEsoCpDisciplineClick=function(e){var id=$(this).attr('id');$(".esovcpDiscHighlight").removeClass("esovcpDiscHighlight");$(this).addClass("esovcpDiscHighlight");$(".esovcpDiscSkills").hide();$("#skills_"+id).show();UpdateEsoCPLink();UpdateEsoCpData();}
window.OnEsoCPPlusButtonClick=function(e){var isShift=false;if(e.shiftKey)isShift=true;var skillId=$(this).attr('skillid');var inputControl=$(".esovcpPointInput[skillid='"+skillId+"']");if(inputControl.length==0)return;var value=(parseInt(inputControl.val())||0);var disciplineId=$(this).closest(".esovcpDiscSkills").attr("disciplineid");if(isShift)value+=10;else value+=1;if(value>100)value=100;inputControl.val(value);UpdateEsoCPSkillDesc(skillId,value);UpdateEsoCPDiscPoints(disciplineId);}
window.OnEsoCPMinusButtonClick=function(e){var isShift=false;if(e.shiftKey)isShift=true;var skillId=$(this).attr('skillid');var inputControl=$(".esovcpPointInput[skillid='"+skillId+"']");if(inputControl.length==0)return;var value=(parseInt(inputControl.val())||0);var disciplineId=$(this).closest(".esovcpDiscSkills").attr("disciplineid");if(isShift)value-=10;else value-=1;if(value<0)value=0;inputControl.val(value);UpdateEsoCPSkillDesc(skillId,value);UpdateEsoCPDiscPoints(disciplineId);}
window.OnEsoCPPointInputChange=function(e){var skillId=$(this).attr('skillid');var value=parseInt($(this).val())||0;var disciplineId=$(this).closest(".esovcpDiscSkills").attr("disciplineid");if(value<0)value=0;if(value>100)value=100;UpdateEsoCPSkillDesc(skillId,value);UpdateEsoCPDiscPoints(disciplineId);}
window.OnEsoCPPointInputScrollUp=function(e){var inputControl=$(this);var skillId=inputControl.parent().parent().attr('skillid');var value=(parseInt(inputControl.val())||0)+1;var disciplineId=$(this).closest(".esovcpDiscSkills").attr("disciplineid");if(value<0)value=0;if(value>100)value=100;inputControl.val(value);UpdateEsoCPSkillDesc(skillId,value);UpdateEsoCPDiscPoints(disciplineId);e.preventDefault();}
window.OnEsoCPPointInputScrollDown=function(e){var inputControl=$(this);var skillId=inputControl.parent().parent().attr('skillid');var value=(parseInt(inputControl.val())||0)-1;var disciplineId=$(this).closest(".esovcpDiscSkills").attr("disciplineid");if(value<0)value=0;if(value>100)value=100;inputControl.val(value);UpdateEsoCPSkillDesc(skillId,value);UpdateEsoCPDiscPoints(disciplineId);e.preventDefault();}
window.UpdateEsoCPSkillDesc=function(skillId,points){var descControl=$("#descskill_"+skillId);if(g_EsoCpSkillDesc[skillId]==null)return;var desc=g_EsoCpSkillDesc[skillId][points];descControl.html(desc);}
window.UpdateEsoCPDiscSkillDesc=function(discId){var discElement=$("#skills_"+discId);discElement.find(".esovcpSkill").each(function(i,element){var skillId=$(this).attr("skillid");if(skillId==null||skillId=="")return;var points=$(this).find(".esovcpPointInput").val();UpdateEsoCPSkillDesc(skillId,points);});}
window.UpdateEsoCPDiscPoints=function(discId){var skillInputs=$("#skills_"+discId+" .esovcpPointInput");var totalPoints=0;var attributeIndex=$("#"+discId).parent().attr("attributeindex");skillInputs.each(function(){totalPoints+=parseInt($(this).val())||0;});$("#skills_"+discId+" .esovcpDiscTitlePoints").text(totalPoints);$("#"+discId+" .esovcpDiscPoints").text(totalPoints);UpdateEsoCPUnlockLevels(discId);UpdateEsoCPDiscAttrPoints(attributeIndex);}
window.UpdateEsoCPDiscAttrPoints=function(attributeIndex){var discPoints=$(".esovcpDiscAttrGroup[attributeindex='"+attributeIndex+"'] .esovcpDiscPoints");var totalPoints=0;discPoints.each(function(){totalPoints+=parseInt($(this).text())||0;});$(".esovcpDiscAttrPoints[attributeindex='"+attributeIndex+"']").text(totalPoints);UpdateEsoCPTotalCPPoints();}
window.UpdateEsoCPTotalCPPoints=function(){var attrPoints=$(".esovcpDiscAttrPoints");var totalPoints=0;attrPoints.each(function(){totalPoints+=parseInt($(this).text())||0;});$(".esovcpTotalPoints").text(totalPoints+" CP");UpdateEsoCPLink();UpdateEsoCpData();if(!g_EsoCpDisableUpdates)$(document).trigger("esocpUpdate");}
window.EncodeEsoCPSkillData64=function(skillData){var rawData=new Uint8Array(skillData);var result=btoa(String.fromCharCode.apply(null,rawData));return encodeURIComponent(result);}
window.DecodeEsoCPSkillData64=function(rawData){var result=new Uint8Array(atob(decodeURIComponent(rawData)).split("").map(function(c){return c.charCodeAt(0);}));return result;}
window.UpdateEsoCPLink=function(){var link=$("#esovcpLinkBlock");var inputControls=$(".esovcpPointInput");var cpQueryData="";var selectDiscId=$(".esovcpDiscHighlight").attr("id");var skillData=[];inputControls.each(function(){var disciplineIndex=parseInt($(this).attr("disciplineIndex"));var skillIndex=parseInt($(this).attr("skillIndex"))||0;var index=(disciplineIndex-1)*4+skillIndex-1;skillData[index]=parseInt($(this).val())||0;});cpQueryData=EncodeEsoCPSkillData64(skillData);if(selectDiscId!="")cpQueryData+="&disc="+selectDiscId;link.attr("href","?cp="+cpQueryData);}
window.UpdateEsoCPUnlockLevels=function(discId){var points=parseInt($("#skills_"+discId+" .esovcpDiscTitlePoints").text())||0;var passives=$("#skills_"+discId+" .esovcpSkillLevel");passives.each(function(){var unlockLevel=$(this).parent().attr("unlocklevel");var parent=$(this).parent();if(unlockLevel<=points){parent.addClass("esovcpPassiveUnlocked");parent.removeClass("esovcpPassiveLocked");parent.attr("unlocked","1");$(this).addClass("esovcpPassiveUnlocked");}else{parent.addClass("esovcpPassiveLocked");parent.removeClass("esovcpPassiveUnlocked");parent.attr("unlocked","0");$(this).removeClass("esovcpPassiveUnlocked");}});}
window.OnEsoCPSearch=function(e){var text=$("#esovcpSearchText").val().trim();DoEsoCPSearch(text);}
window.DoEsoCPSearch=function(text){var newSearch=false;text=text.toLowerCase();if(text!=g_EsoCPSearchText){g_EsoCPSearchText=text;g_EsoCPSearchLastIndex=-1;newSearch=true;}$(".esovcpHighlightSkill").removeClass("esovcpHighlightSkill");var result=FindNextEsoCPText();if(result==null){$("#esovcpSearchResult").text("No matches found!");return false;}$("#esovcpSearchResult").text("Found match! Search again for next match...");SelectEsoCPSkillElement(result);return true;}
window.SelectEsoCPSkillElement=function(element){if(element==null||element.length==0)return;var parent=element.parent();var skillId=parseInt(element.attr("skillid"))||0;if(skillId<=0)return;element.addClass("esovcpHighlightSkill");if(!parent.is(':visible')){var discId=parent.attr("disciplineid");$(".esovcpDiscSkills:visible").hide();parent.show();$(".esovcpDiscHighlight").removeClass("esovcpDiscHighlight");$("#"+discId).addClass("esovcpDiscHighlight");}}
window.FindNextEsoCPText=function(){var searchElements=$(".esovcpSkill");var searchText=g_EsoCPSearchText.toLowerCase();for(var i=g_EsoCPSearchLastIndex+1;i<searchElements.length;++i){var element=$(searchElements[i]);var index=element.text().toLowerCase().indexOf(searchText);if(index>=0){g_EsoCPSearchLastIndex=i;return element;}}g_EsoCPSearchLastIndex=-1;return null;}
window.OnEsoCPResetAll=function(e){$(".esovcpPointInput").val(0);EsoCpUpdateAll();}
window.OnEsoCPResetDisc=function(e){var parent=$(this).parent();var discId=parent.attr("disciplineid");if(discId==null||discId=="")return;parent.find(".esovcpPointInput").val("0");UpdateEsoCPDiscSkillDesc(discId);UpdateEsoCPDiscPoints(discId);}
window.EsoCpUpdateAll=function(){UpdateEsoCPDiscSkillDesc('the_lord');UpdateEsoCPDiscSkillDesc('the_lady');UpdateEsoCPDiscSkillDesc('the_steed');UpdateEsoCPDiscSkillDesc('the_ritual');UpdateEsoCPDiscSkillDesc('the_atronach');UpdateEsoCPDiscSkillDesc('the_apprentice');UpdateEsoCPDiscSkillDesc('the_shadow');UpdateEsoCPDiscSkillDesc('the_lover');UpdateEsoCPDiscSkillDesc('the_tower');g_EsoCpDisableUpdates=true;UpdateEsoCPDiscPoints('the_lord');UpdateEsoCPDiscPoints('the_lady');UpdateEsoCPDiscPoints('the_steed');UpdateEsoCPDiscPoints('the_ritual');UpdateEsoCPDiscPoints('the_atronach');UpdateEsoCPDiscPoints('the_apprentice');UpdateEsoCPDiscPoints('the_shadow');UpdateEsoCPDiscPoints('the_lover');g_EsoCpDisableUpdates=false;UpdateEsoCPDiscPoints('the_tower');}
window.esovcpOnDocReady=function(){$(".esovcpDiscipline").click(OnEsoCpDisciplineClick);$(".esovcpMinusButton").click(OnEsoCPMinusButtonClick);$(".esovcpPlusButton").click(OnEsoCPPlusButtonClick);$(".esovcpPointInput").on('input',function(e){OnEsoCPPointInputChange.call(this,e);});$(".esovcpPointInput").bind('mousewheel DOMMouseScroll',function(e){if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0){OnEsoCPPointInputScrollUp.call(this,e);}else{OnEsoCPPointInputScrollDown.call(this,e);}});$("#esovcpSearchText").on("keypress",function(e){if(e.keyCode==13)OnEsoCPSearch(e);});$("#esovcpSearchButton").click(OnEsoCPSearch);$("#esotvcpResetCP").click(OnEsoCPResetAll);$(".esotvcpResetDisc").click(OnEsoCPResetDisc);EsoCpUpdateAll();}
$(document).ready(esovcpOnDocReady);},{},{});mw.loader.implement("ext.EsoSkills.scripts2",function($,jQuery){window.g_EsoSkillPopupTooltip=null;window.g_EsoSkillPopupIsVisible=false;function CreateEsoSkillPopupTooltip(){g_EsoSkillPopupTooltip=$('<div />').addClass('esoSkillPopupTooltip').hide();$('body').append(g_EsoSkillPopupTooltip);}window.ShowEsoSkillPopupTooltip=function(parent,skillId,level,health,magicka,stamina,spellDamage,weaponDamage,skillLine){var linkSrc="//esolog.uesp.net/skillTooltip.php";var dataOk=false;var params="embed";if(skillLine)params+="&skillline="+skillLine;if(skillId){params+="&id="+skillId;dataOk=true;}if(level)params+="&level="+level;if(health)params+="&health="+health;if(magicka)params+="&magicka="+magicka;if(stamina)params+="&stamina="+stamina;if(spellDamage)params+="&spelldamage="+spellDamage;if(weaponDamage)params+="&weapondamage="+weaponDamage;if(!dataOk)return false;if(g_EsoSkillPopupTooltip==null)CreateEsoSkillPopupTooltip();var position=$(parent).
offset();var width=$(parent).width();g_EsoSkillPopupTooltip.css({top:position.top-50,left:position.left+width});g_EsoSkillPopupIsVisible=true;g_EsoSkillPopupTooltip.load(linkSrc,params,function(){if(g_EsoSkillPopupIsVisible){g_EsoSkillPopupTooltip.show();AdjustEsoItemLinkTooltipPosition(g_EsoSkillPopupTooltip,$(parent));}});}
function AdjustEsoSkillPopupTooltipPosition(tooltip,parent){var windowWidth=$(window).width();var windowHeight=$(window).height();var toolTipWidth=tooltip.width();var toolTipHeight=tooltip.height();var elementHeight=parent.height();var elementWidth=parent.width();var top=parent.offset().top-toolTipHeight/2+elementHeight/2;var left=parent.offset().left+parent.outerWidth()+3;tooltip.offset({top:top,left:left});var viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.bottom>windowHeight){var deltaHeight=viewportTooltip.bottom-windowHeight+10;top=top-deltaHeight}else if(viewportTooltip.top<0){var deltaHeight=viewportTooltip.top-10;top=top-deltaHeight}if(viewportTooltip.right>windowWidth){left=left-toolTipWidth-parent.width()-28;}tooltip.offset({top:top,left:left});viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.left<0){var el=$('<i/>').css('display','inline').insertBefore(parent[0]);var realOffset=el.offset();el.remove();left=realOffset.left-
toolTipWidth-3;tooltip.offset({top:top,left:left});}}function HideEsoSkillPopupTooltip(){g_EsoSkillPopupTooltip.hide();g_EsoSkillPopupIsVisible=false;}function OnEsoSkillLinkEnter(){ShowEsoSkillPopupTooltip(this,$(this).attr('skillid'),$(this).attr('level'),$(this).attr('health'),$(this).attr('magicka'),$(this).attr('stamina'),$(this).attr('spelldamage'),$(this).attr('weapondamage'),$(this).attr('skillline'));}function OnEsoSkillLinkLeave(){HideEsoSkillPopupTooltip();}$(document).ready(function(){$('.esoSkillTooltipLink').hover(OnEsoSkillLinkEnter,OnEsoSkillLinkLeave);});},{},{});mw.loader.implement("ext.LegendCards.scripts",function($,jQuery){window.LegendsCardPopup=null;window.LegendsCardPopup_Image=null;window.LegendsCardPopup_LastElement=null;window.LegendsCardPopup_Visible=false;window.LegendsCardPopup_Error=false;function CreateLegendsCardPopup(){LegendsCardPopup=$('<div />').addClass('eslegCardPopup').hide();LegendsCardPopup_Image=$('<img />').on("load",OnLegendsCardImageLoad).
on("error",OnLegendsCardImageError);LegendsCardPopup.append(LegendsCardPopup_Image);$('body').append(LegendsCardPopup);}function OnLegendsCardImageLoad(e){LegendsCardPopup_Error=false;if(!LegendsCardPopup_Visible||LegendsCardPopup_LastElement==null)return;LegendsCardPopup.show();AdjustLegendsCardPopupPosition(LegendsCardPopup,LegendsCardPopup_LastElement);}function OnLegendsCardImageError(e){if(LegendsCardPopup_Error){LegendsCardPopup_Visible=false;LegendsCardPopup_Error=false;LegendsCardPopup_LastElement=null;LegendsCardPopup.hide();return;}if(!LegendsCardPopup_Visible||LegendsCardPopup_LastElement==null)return;LegendsCardPopup_Error=true;LegendsCardPopup_Image.attr("src","//legends.uesp.net/unknown.png");}function ShowLegendsCardPopup(parent,cardName){if(LegendsCardPopup==null)CreateLegendsCardPopup();LegendsCardPopup_LastElement=parent;var imageSrc="//legends.uesp.net/"+cardName+".png";LegendsCardPopup_Visible=true;LegendsCardPopup_Error=false;LegendsCardPopup_Image.attr("src",
imageSrc);}function AdjustLegendsCardPopupPosition(tooltip,parent){var windowWidth=$(window).width();var windowHeight=$(window).height();var toolTipWidth=tooltip.width();var toolTipHeight=tooltip.height();var elementHeight=parent.height();var elementWidth=parent.width();var top=parent.offset().top-150;var left=parent.offset().left+parent.outerWidth()+3;tooltip.offset({top:top,left:left});var viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.bottom>windowHeight){var deltaHeight=viewportTooltip.bottom-windowHeight+10;top=top-deltaHeight}else if(viewportTooltip.top<0){var deltaHeight=viewportTooltip.top-10;top=top-deltaHeight}if(viewportTooltip.right>windowWidth){left=left-toolTipWidth-parent.width()-28;}tooltip.offset({top:top,left:left});viewportTooltip=tooltip[0].getBoundingClientRect();if(viewportTooltip.left<0){var el=$('<i/>').css('display','inline').insertBefore(parent[0]);var realOffset=el.offset();el.remove();left=realOffset.left-toolTipWidth-3;tooltip.offset(
{top:top,left:left});}}function HideLegendsCardPopup(){LegendsCardPopup_Visible=false;LegendsCardPopup_Error=false;if(LegendsCardPopup==null)return;LegendsCardPopup.hide();}function OnLegendsCardLinkEnter(){var $this=$(this);LegendsCardPopup_LastElement=$this;LegendsCardPopup_Error=false;ShowLegendsCardPopup(LegendsCardPopup_LastElement,$this.attr('card'));}function OnLegendsCardLinkLeave(){LegendsCardPopup_LastElement=null;LegendsCardPopup_Error=false;HideLegendsCardPopup();}function OnLegendsCardFilterClick(e){var isVisible=!$("#eslegCardFilterContent").is(":visible");$("#eslegCardFilterContent").slideToggle();if(isVisible)$("#eslegCardFilterArrow").html("&#x25B2;");else $("#eslegCardFilterArrow").html("&#x25BC");}function OnLegendsCardFormReset(){$('.eslegCardFilterInput').val('');$('.eslegCardFilterInputShort').val('');$('.eslegCardFilterList').val('Any');}$(document).ready(function(){$('.legendsCardLink').hover(OnLegendsCardLinkEnter,OnLegendsCardLinkLeave);$(
'.eslegCardFilterTitle').click(OnLegendsCardFilterClick);});},{},{});mw.loader.implement("ext.UespCustomCode.ad.scripts",function($,jQuery){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-1386039-1','auto');ga('send','pageview');window.factorem={};window.factorem.slotSizes=[[[728,90]],[[300,250]],[[300,250]],[[728,90]],[[728,90]],[[300,250]],[[160,600]],[[160,600]],];var script=document.createElement('script');var tstamp=new Date();script.id='factorem';script.src='//cdm.cursecdn.com/js/uesp/cdmfactorem_min.js?sec=home&misc='+tstamp.getTime();script.async=false;script.type='text/javascript';document.head.appendChild(script);},{},{});mw.loader.implement("jquery.accessKeyLabel",function($,jQuery){(function($,mw
){var cachedAccessKeyPrefix,useTestPrefix=false,labelable='button, input, textarea, keygen, meter, output, progress, select';function getAccessKeyPrefix(ua){if(!ua&&cachedAccessKeyPrefix){return cachedAccessKeyPrefix;}var profile=$.client.profile(ua),accessKeyPrefix='alt-';if(profile.name==='opera'){accessKeyPrefix='shift-esc-';}else if(profile.name==='chrome'){accessKeyPrefix=(profile.platform==='mac'?'ctrl-option-':'alt-shift-');}else if(profile.platform!=='win'&&profile.name==='safari'&&profile.layoutVersion>526){accessKeyPrefix='ctrl-alt-';}else if(!(profile.platform==='win'&&profile.name==='safari')&&(profile.name==='safari'||profile.platform==='mac'||profile.name==='konqueror')){accessKeyPrefix='ctrl-';}else if((profile.name==='firefox'||profile.name==='iceweasel')&&profile.versionBase>'1'){accessKeyPrefix='alt-shift-';}if(!ua){cachedAccessKeyPrefix=accessKeyPrefix;}return accessKeyPrefix;}function getAccessKeyLabel(element){if(!element.accessKey){return'';}if(!useTestPrefix&&
element.accessKeyLabel){return element.accessKeyLabel;}return(useTestPrefix?'test-':getAccessKeyPrefix())+element.accessKey;}function updateTooltipOnElement(element,titleElement){var array=(mw.msg('word-separator')+mw.msg('brackets')).split('$1'),regexp=new RegExp($.map(array,$.escapeRE).join('.*?')+'$'),oldTitle=titleElement.title,rawTitle=oldTitle.replace(regexp,''),newTitle=rawTitle,accessKeyLabel=getAccessKeyLabel(element);if(!oldTitle){return;}if(accessKeyLabel){newTitle+=mw.msg('word-separator')+mw.msg('brackets',accessKeyLabel);}if(oldTitle!==newTitle){titleElement.title=newTitle;}}function updateTooltip(element){var id,$element,$label,$labelParent;updateTooltipOnElement(element,element);$element=$(element);if($element.is(labelable)){id=element.id.replace(/"/g,'\\"');if(id){$label=$('label[for="'+id+'"]');if($label.length===1){updateTooltipOnElement(element,$label[0]);}}$labelParent=$element.parents('label');if($labelParent.length===1){updateTooltipOnElement(element,$labelParent
[0]);}}}$.fn.updateTooltipAccessKeys=function(){return this.each(function(){updateTooltip(this);});};$.fn.updateTooltipAccessKeys.getAccessKeyPrefix=getAccessKeyPrefix;$.fn.updateTooltipAccessKeys.setTestMode=function(mode){useTestPrefix=mode;};}(jQuery,mediaWiki));},{},{"brackets":"[$1]","word-separator":" "});mw.loader.implement("jquery.client",function($,jQuery){(function($){var profileCache={};$.client={profile:function(nav){if(nav===undefined){nav=window.navigator;}if(profileCache[nav.userAgent+'|'+nav.platform]!==undefined){return profileCache[nav.userAgent+'|'+nav.platform];}var versionNumber,key=nav.userAgent+'|'+nav.platform,uk='unknown',x='x',wildUserAgents=['Opera','Navigator','Minefield','KHTML','Chrome','PLAYSTATION 3','Iceweasel'],userAgentTranslations=[[/(Firefox|MSIE|KHTML,?\slike\sGecko|Konqueror)/,''],['Chrome Safari','Chrome'],['KHTML','Konqueror'],['Minefield','Firefox'],['Navigator','Netscape'],['PLAYSTATION 3','PS3']],versionPrefixes=['camino','chrome','firefox',
'iceweasel','netscape','netscape6','opera','version','konqueror','lynx','msie','safari','ps3','android'],versionSuffix='(\\/|\\;?\\s|)([a-z0-9\\.\\+]*?)(\\;|dev|rel|\\)|\\s|$)',names=['camino','chrome','firefox','iceweasel','netscape','konqueror','lynx','msie','opera','safari','ipod','iphone','blackberry','ps3','rekonq','android'],nameTranslations=[],layouts=['gecko','konqueror','msie','trident','opera','webkit'],layoutTranslations=[['konqueror','khtml'],['msie','trident'],['opera','presto']],layoutVersions=['applewebkit','gecko','trident'],platforms=['win','wow64','mac','linux','sunos','solaris','iphone'],platformTranslations=[['sunos','solaris'],['wow64','win']],translate=function(source,translations){var i;for(i=0;i<translations.length;i++){source=source.replace(translations[i][0],translations[i][1]);}return source;},ua=nav.userAgent,match,name=uk,layout=uk,layoutversion=uk,platform=uk,version=x;if(match=new RegExp('('+wildUserAgents.join('|')+')').exec(ua)){ua=translate(ua,
userAgentTranslations);}ua=ua.toLowerCase();if(match=new RegExp('('+names.join('|')+')').exec(ua)){name=translate(match[1],nameTranslations);}if(match=new RegExp('('+layouts.join('|')+')').exec(ua)){layout=translate(match[1],layoutTranslations);}if(match=new RegExp('('+layoutVersions.join('|')+')\\\/(\\d+)').exec(ua)){layoutversion=parseInt(match[2],10);}if(match=new RegExp('('+platforms.join('|')+')').exec(nav.platform.toLowerCase())){platform=translate(match[1],platformTranslations);}if(match=new RegExp('('+versionPrefixes.join('|')+')'+versionSuffix).exec(ua)){version=match[3];}if(name==='safari'&&version>400){version='2.0';}if(name==='opera'&&version>=9.8){match=ua.match(/\bversion\/([0-9\.]*)/);if(match&&match[1]){version=match[1];}else{version='10';}}if(name==='chrome'&&(match=ua.match(/\bopr\/([0-9\.]*)/))){if(match[1]){name='opera';version=match[1];}}if(layout==='trident'&&layoutversion>=7&&(match=ua.match(/\brv[ :\/]([0-9\.]*)/))){if(match[1]){name='msie';version=match[1];}}if
(match=ua.match(/\bsilk\/([0-9.\-_]*)/)){if(match[1]){name='silk';version=match[1];}}versionNumber=parseFloat(version,10)||0.0;return profileCache[key]={name:name,layout:layout,layoutVersion:layoutversion,platform:platform,version:version,versionBase:(version!==x?Math.floor(versionNumber).toString():x),versionNumber:versionNumber};},test:function(map,profile,exactMatchOnly){var conditions,dir,i,op,val,j,pieceVersion,pieceVal,compare;profile=$.isPlainObject(profile)?profile:$.client.profile();if(map.ltr&&map.rtl){dir=$('body').is('.rtl')?'rtl':'ltr';map=map[dir];}if(typeof map!=='object'||map[profile.name]===undefined){return!exactMatchOnly;}conditions=map[profile.name];if(conditions===false){return false;}if(conditions===null){return true;}for(i=0;i<conditions.length;i++){op=conditions[i][0];val=conditions[i][1];if(typeof val==='string'){pieceVersion=profile.version.toString().split('.');pieceVal=val.split('.');while(pieceVersion.length<pieceVal.length){pieceVersion.push('0');}while(
pieceVal.length<pieceVersion.length){pieceVal.push('0');}compare=0;for(j=0;j<pieceVersion.length;j++){if(Number(pieceVersion[j])<Number(pieceVal[j])){compare=-1;break;}else if(Number(pieceVersion[j])>Number(pieceVal[j])){compare=1;break;}}if(!(eval(''+compare+op+'0'))){return false;}}else if(typeof val==='number'){if(!(eval('profile.versionNumber'+op+val))){return false;}}}return true;}};}(jQuery));},{},{});mw.loader.implement("jquery.mwExtension",function($,jQuery){(function($){$.extend({trimLeft:function(str){return str===null?'':str.toString().replace(/^\s+/,'');},trimRight:function(str){return str===null?'':str.toString().replace(/\s+$/,'');},ucFirst:function(str){return str.charAt(0).toUpperCase()+str.slice(1);},escapeRE:function(str){return str.replace(/([\\{}()|.?*+\-\^$\[\]])/g,'\\$1');},isDomElement:function(el){return!!el&&!!el.nodeType;},isEmpty:function(v){var key;if(v===''||v===0||v==='0'||v===null||v===false||v===undefined){return true;}if(v.length===0){return true;}if(
typeof v==='object'){for(key in v){return false;}return true;}return false;},compareArray:function(arrThis,arrAgainst){if(arrThis.length!==arrAgainst.length){return false;}for(var i=0;i<arrThis.length;i++){if($.isArray(arrThis[i])){if(!$.compareArray(arrThis[i],arrAgainst[i])){return false;}}else if(arrThis[i]!==arrAgainst[i]){return false;}}return true;},compareObject:function(objectA,objectB){var prop,type;if(typeof objectA===typeof objectB){if(typeof objectA==='object'){if(objectA===objectB){return true;}else{for(prop in objectA){if(prop in objectB){type=typeof objectA[prop];if(type===typeof objectB[prop]){switch(type){case'object':if(!$.compareObject(objectA[prop],objectB[prop])){return false;}break;case'function':if(objectA[prop].toString()!==objectB[prop].toString()){return false;}break;default:if(objectA[prop]!==objectB[prop]){return false;}break;}}else{return false;}}else{return false;}}for(prop in objectB){if(!(prop in objectA)){return false;}}}}}else{return false;}return true
;}});}(jQuery));},{},{});mw.loader.implement("mediawiki.legacy.ajax",function($,jQuery){(function(mw){function debug(text){if(!window.sajax_debug_mode){return false;}var b,m,e=document.getElementById('sajax_debug');if(!e){e=document.createElement('p');e.className='sajax_debug';e.id='sajax_debug';b=document.getElementsByTagName('body')[0];if(b.firstChild){b.insertBefore(e,b.firstChild);}else{b.appendChild(e);}}m=document.createElement('div');m.appendChild(document.createTextNode(text));e.appendChild(m);return true;}function createXhr(){debug('sajax_init_object() called..');var a;try{a=new XMLHttpRequest();}catch(xhrE){try{a=new window.ActiveXObject('Msxml2.XMLHTTP');}catch(msXmlE){try{a=new window.ActiveXObject('Microsoft.XMLHTTP');}catch(msXhrE){a=null;}}}if(!a){debug('Could not create connection object.');}return a;}function doAjaxRequest(func_name,args,target){var i,x,uri,post_data;uri=mw.util.wikiScript()+'?action=ajax';if(window.sajax_request_type==='GET'){if(uri.indexOf('?')===-1)
{uri=uri+'?rs='+encodeURIComponent(func_name);}else{uri=uri+'&rs='+encodeURIComponent(func_name);}for(i=0;i<args.length;i++){uri=uri+'&rsargs[]='+encodeURIComponent(args[i]);}post_data=null;}else{post_data='rs='+encodeURIComponent(func_name);for(i=0;i<args.length;i++){post_data=post_data+'&rsargs[]='+encodeURIComponent(args[i]);}}x=createXhr();if(!x){alert('AJAX not supported');return false;}try{x.open(window.sajax_request_type,uri,true);}catch(e){if(location.hostname==='localhost'){alert('Your browser blocks XMLHttpRequest to "localhost", try using a real hostname for development/testing.');}throw e;}if(window.sajax_request_type==='POST'){x.setRequestHeader('Method','POST '+uri+' HTTP/1.1');x.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}x.setRequestHeader('Pragma','cache=yes');x.setRequestHeader('Cache-Control','no-transform');x.onreadystatechange=function(){if(x.readyState!==4){return;}debug('received ('+x.status+' '+x.statusText+') '+x.responseText);if(
typeof target==='function'){target(x);}else if(typeof target==='object'){if(target.tagName==='INPUT'){if(x.status===200){target.value=x.responseText;}}else{if(x.status===200){target.innerHTML=x.responseText;}else{target.innerHTML='<div class="error">Error: '+x.status+' '+x.statusText+' ('+x.responseText+')</div>';}}}else{alert('Bad target for sajax_do_call: not a function or object: '+target);}};debug(func_name+' uri = '+uri+' / post = '+post_data);x.send(post_data);debug(func_name+' waiting..');return true;}function wfSupportsAjax(){var request=createXhr(),supportsAjax=request?true:false;request=undefined;return supportsAjax;}var deprecationNotice='Sajax is deprecated, use jQuery.ajax or mediawiki.api instead.';mw.log.deprecate(window,'sajax_debug_mode',false,deprecationNotice);mw.log.deprecate(window,'sajax_request_type','GET',deprecationNotice);mw.log.deprecate(window,'sajax_debug',debug,deprecationNotice);mw.log.deprecate(window,'sajax_init_object',createXhr,deprecationNotice);mw.
log.deprecate(window,'sajax_do_call',doAjaxRequest,deprecationNotice);mw.log.deprecate(window,'wfSupportsAjax',wfSupportsAjax,deprecationNotice);}(mediaWiki));},{},{});mw.loader.implement("mediawiki.legacy.wikibits",function($,jQuery){(function(mw,$){var msg,win=window,ua=navigator.userAgent.toLowerCase(),onloadFuncts=[];msg='Use feature detection or module jquery.client instead.';mw.log.deprecate(win,'clientPC',ua,msg);mw.log.deprecate(win,'is_gecko',false,msg);mw.log.deprecate(win,'is_chrome_mac',false,msg);mw.log.deprecate(win,'is_chrome',false,msg);mw.log.deprecate(win,'webkit_version',false,msg);mw.log.deprecate(win,'is_safari_win',false,msg);mw.log.deprecate(win,'is_safari',false,msg);mw.log.deprecate(win,'webkit_match',false,msg);mw.log.deprecate(win,'is_ff2',false,msg);mw.log.deprecate(win,'ff2_bugs',false,msg);mw.log.deprecate(win,'is_ff2_win',false,msg);mw.log.deprecate(win,'is_ff2_x11',false,msg);mw.log.deprecate(win,'opera95_bugs',false,msg);mw.log.deprecate(win,
'opera7_bugs',false,msg);mw.log.deprecate(win,'opera6_bugs',false,msg);mw.log.deprecate(win,'is_opera_95',false,msg);mw.log.deprecate(win,'is_opera_preseven',false,msg);mw.log.deprecate(win,'is_opera',false,msg);mw.log.deprecate(win,'ie6_bugs',false,msg);msg='Use jQuery instead.';mw.log.deprecate(win,'doneOnloadHook',undefined,msg);mw.log.deprecate(win,'onloadFuncts',[],msg);mw.log.deprecate(win,'runOnloadHook',$.noop,msg);mw.log.deprecate(win,'changeText',$.noop,msg);mw.log.deprecate(win,'killEvt',$.noop,msg);mw.log.deprecate(win,'addHandler',$.noop,msg);mw.log.deprecate(win,'hookEvent',$.noop,msg);mw.log.deprecate(win,'addClickHandler',$.noop,msg);mw.log.deprecate(win,'removeHandler',$.noop,msg);mw.log.deprecate(win,'getElementsByClassName',function(){return[];},msg);mw.log.deprecate(win,'getInnerText',function(){return'';},msg);mw.log.deprecate(win,'addOnloadHook',function(hookFunct){if(onloadFuncts){onloadFuncts.push(hookFunct);}else{hookFunct();}},msg);$(win).on('load',function(){
var i,functs;if(!onloadFuncts){return;}functs=onloadFuncts.slice();onloadFuncts=undefined;for(i=0;i<functs.length;i++){functs[i]();}});msg='Use jquery.checkboxShiftClick instead.';mw.log.deprecate(win,'checkboxes',[],msg);mw.log.deprecate(win,'lastCheckbox',null,msg);mw.log.deprecate(win,'setupCheckboxShiftClick',$.noop,msg);mw.log.deprecate(win,'addCheckboxClickHandlers',$.noop,msg);mw.log.deprecate(win,'checkboxClickHandler',$.noop,msg);mw.log.deprecate(win,'mwEditButtons',[],'Use mw.toolbar instead.');mw.log.deprecate(win,'mwCustomEditButtons',[],'Use mw.toolbar instead.');mw.log.deprecate(win,'injectSpinner',$.noop,'Use jquery.spinner instead.');mw.log.deprecate(win,'removeSpinner',$.noop,'Use jquery.spinner instead.');mw.log.deprecate(win,'escapeQuotes',$.noop,'Use mw.html instead.');mw.log.deprecate(win,'escapeQuotesHTML',$.noop,'Use mw.html instead.');mw.log.deprecate(win,'jsMsg',function(message){if(!arguments.length||message===''||message===null){return true;}if(typeof message
!=='object'){message=$.parseHTML(message);}mw.notify(message,{autoHide:true,tag:'legacy'});return true;},'Use mediawiki.notify instead.');msg='Use mediawiki.util instead.';mw.log.deprecate(win,'addPortletLink',mw.util.addPortletLink,msg);mw.log.deprecate(win,'appendCSS',mw.util.addCSS,msg);msg='Use jquery.accessKeyLabel instead.';mw.log.deprecate(win,'tooltipAccessKeyPrefix','alt-',msg);mw.log.deprecate(win,'tooltipAccessKeyRegexp',/\[(alt-)?(.)\]$/,msg);win.updateTooltipAccessKeys=function(){return mw.util.updateTooltipAccessKeys.apply(null,arguments);};win.loadedScripts={};win.importScript=function(page){var uri=mw.config.get('wgScript')+'?title='+mw.util.wikiUrlencode(page)+'&action=raw&ctype=text/javascript';return win.importScriptURI(uri);};win.importScriptURI=function(url){if(win.loadedScripts[url]){return null;}win.loadedScripts[url]=true;var s=document.createElement('script');s.setAttribute('src',url);s.setAttribute('type','text/javascript');document.getElementsByTagName('head'
)[0].appendChild(s);return s;};win.importStylesheet=function(page){var uri=mw.config.get('wgScript')+'?title='+mw.util.wikiUrlencode(page)+'&action=raw&ctype=text/css';return win.importStylesheetURI(uri);};win.importStylesheetURI=function(url,media){var l=document.createElement('link');l.rel='stylesheet';l.href=url;if(media){l.media=media;}document.getElementsByTagName('head')[0].appendChild(l);return l;};}(mediaWiki,jQuery));},{},{});mw.loader.implement("mediawiki.notify",function($,jQuery){(function(mw){'use strict';mw.notify=function(message,options){return mw.loader.using('mediawiki.notification').then(function(){return mw.notification.notify(message,options);});};}(mediaWiki));},{},{});mw.loader.implement("mediawiki.util",function($,jQuery){(function(mw,$){'use strict';var util={init:function(){util.$content=(function(){var i,l,$node,selectors;selectors=['.mw-body-primary','.mw-body','#mw-content-text','body'];for(i=0,l=selectors.length;i<l;i++){$node=$(selectors[i]);if($node.
length){return $node.first();}}return util.$content;}());},rawurlencode:function(str){str=String(str);return encodeURIComponent(str).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/~/g,'%7E');},wikiUrlencode:function(str){return util.rawurlencode(str).replace(/%20/g,'_').replace(/%3B/g,';').replace(/%40/g,'@').replace(/%24/g,'$').replace(/%21/g,'!').replace(/%2A/g,'*').replace(/%28/g,'(').replace(/%29/g,')').replace(/%2C/g,',').replace(/%2F/g,'/').replace(/%3A/g,':');},getUrl:function(str,params){var url=mw.config.get('wgArticlePath').replace('$1',util.wikiUrlencode(typeof str==='string'?str:mw.config.get('wgPageName')));if(params&&!$.isEmptyObject(params)){url+=(url.indexOf('?')!==-1?'&':'?')+$.param(params);}return url;},wikiScript:function(str){str=str||'index';if(str==='index'){return mw.config.get('wgScript');}else if(str==='load'){return mw.config.get('wgLoadScript');}else{return mw.config.get('wgScriptPath')+'/'+str
+mw.config.get('wgScriptExtension');}},addCSS:function(text){var s=mw.loader.addStyleTag(text);return s.sheet||s.styleSheet||s;},getParamValue:function(param,url){if(url===undefined){url=document.location.href;}var re=new RegExp('^[^#]*[&?]'+$.escapeRE(param)+'=([^&#]*)'),m=re.exec(url);if(m){return decodeURIComponent(m[1].replace(/\+/g,'%20'));}return null;},$content:null,addPortletLink:function(portlet,href,text,id,tooltip,accesskey,nextnode){var $item,$link,$portlet,$ul;if(arguments.length<3){return null;}$link=$('<a>').attr('href',href).text(text);if(tooltip){$link.attr('title',tooltip);}$portlet=$('#'+portlet);if($portlet.length===0){return null;}$ul=$portlet.find('ul').eq(0);if($ul.length===0){$ul=$('<ul>');if($portlet.find('div:first').length===0){$portlet.append($ul);}else{$portlet.find('div').eq(-1).append($ul);}}if($ul.length===0){return null;}$portlet.removeClass('emptyPortlet');if($portlet.hasClass('vectorTabs')){$item=$link.wrap('<li><span></span></li>').parent().parent();
}else{$item=$link.wrap('<li></li>').parent();}if(id){$item.attr('id',id);}if(accesskey){$link.attr('accesskey',accesskey);}if(tooltip){$link.attr('title',tooltip).updateTooltipAccessKeys();}if(nextnode){if(nextnode.nodeType||typeof nextnode==='string'){nextnode=$ul.find(nextnode);}else if(!nextnode.jquery||(nextnode.length&&nextnode[0].parentNode!==$ul[0])){$ul.append($item);return $item[0];}if(nextnode.length===1){nextnode.before($item);return $item[0];}}$ul.append($item);return $item[0];},validateEmail:function(mailtxt){var rfc5322Atext,rfc1034LdhStr,html5EmailRegexp;if(mailtxt===''){return null;}rfc5322Atext='a-z0-9!#$%&\'*+\\-/=?^_`{|}~';rfc1034LdhStr='a-z0-9\\-';html5EmailRegexp=new RegExp('^'+'['+rfc5322Atext+'\\.]+'+'@'+'['+rfc1034LdhStr+']+'+'(?:\\.['+rfc1034LdhStr+']+)*'+'$','i');return(mailtxt.match(html5EmailRegexp)!==null);},isIPv4Address:function(address,allowBlock){if(typeof address!=='string'){return false;}var block=allowBlock?'(?:\\/(?:3[0-2]|[12]?\\d))?':'',RE_IP_BYTE
='(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|0?[0-9]?[0-9])',RE_IP_ADD='(?:'+RE_IP_BYTE+'\\.){3}'+RE_IP_BYTE;return address.search(new RegExp('^'+RE_IP_ADD+block+'$'))!==-1;},isIPv6Address:function(address,allowBlock){if(typeof address!=='string'){return false;}var block=allowBlock?'(?:\\/(?:12[0-8]|1[01][0-9]|[1-9]?\\d))?':'',RE_IPV6_ADD='(?:'+':(?::|(?::'+'[0-9A-Fa-f]{1,4}'+'){1,7})'+'|'+'[0-9A-Fa-f]{1,4}'+'(?::'+'[0-9A-Fa-f]{1,4}'+'){0,6}::'+'|'+'[0-9A-Fa-f]{1,4}'+'(?::'+'[0-9A-Fa-f]{1,4}'+'){7}'+')';if(address.search(new RegExp('^'+RE_IPV6_ADD+block+'$'))!==-1){return true;}RE_IPV6_ADD='[0-9A-Fa-f]{1,4}'+'(?:::?'+'[0-9A-Fa-f]{1,4}'+'){1,6}';return address.search(new RegExp('^'+RE_IPV6_ADD+block+'$'))!==-1&&address.search(/::/)!==-1&&address.search(/::.*::/)===-1;}};mw.log.deprecate(util,'wikiGetlink',util.getUrl,'Use mw.util.getUrl instead.');mw.log.deprecate(util,'tooltipAccessKeyPrefix',$.fn.updateTooltipAccessKeys.getAccessKeyPrefix(),'Use jquery.accessKeyLabel instead.');mw.log.
deprecate(util,'tooltipAccessKeyRegexp',/\[(ctrl-)?(option-)?(alt-)?(shift-)?(esc-)?(.)\]$/,'Use jquery.accessKeyLabel instead.');mw.log.deprecate(util,'updateTooltipAccessKeys',function($nodes){if(!$nodes){if(document.querySelectorAll){$nodes=$(document.querySelectorAll('[accesskey]'));}else{$nodes=$('#column-one a, #mw-head a, #mw-panel a, #p-logo a, input, label, button');}}else if(!($nodes instanceof $)){$nodes=$($nodes);}$nodes.updateTooltipAccessKeys();},'Use jquery.accessKeyLabel instead.');mw.log.deprecate(util,'jsMessage',function(message){if(!arguments.length||message===''||message===null){return true;}if(typeof message!=='object'){message=$.parseHTML(message);}mw.notify(message,{autoHide:true,tag:'legacy'});return true;},'Use mw.notify instead.');mw.util=util;}(mediaWiki,jQuery));},{},{});mw.loader.implement("mediawiki.page.startup",function($,jQuery){(function(mw,$){mw.page={};$('html').addClass('client-js').removeClass('client-nojs');$(function(){mw.util.init();mw.hook(
'wikipage.content').fire($('#mw-content-text'));});}(mediaWiki,jQuery));},{},{});
/* cache key: uesp_net_wiki5:resourceloader:filter:minify-js:7:6d086f92793277a0f66456dc2bdb1b2f */